"use strict";(self.webpackChunkTP_CLINICA=self.webpackChunkTP_CLINICA||[]).push([[823],{5823:(N,g,n)=>{n.r(g),n.d(g,{LoginModule:()=>j});var f=n(6895),u=n(6378),p=n(5861),s=n(4006),v=n(5708),h=n(4500),o=n(4650),b=n(7556),y=n(1209),U=n(9724),Z=n(4465),L=n(605);function T(t,a){if(1&t&&(o.TgZ(0,"small",18),o._uU(1),o.qZA()),2&t){const e=a.$implicit,r=o.oxw(2);o.xp6(1),o.hij(" ",null==r.correo?null:r.correo.getError(e).mensaje," ")}}function C(t,a){if(1&t&&(o.ynx(0),o.YNc(1,T,2,1,"small",17),o.BQk()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.obtenerErrores(null==e.correo?null:e.correo.errors))}}function S(t,a){if(1&t&&(o.TgZ(0,"small",18),o._uU(1),o.qZA()),2&t){const e=a.$implicit,r=o.oxw(2);o.xp6(1),o.hij(" ",null==r.clave?null:r.clave.getError(e).mensaje," ")}}function A(t,a){if(1&t&&(o.ynx(0),o.YNc(1,S,2,1,"small",17),o.BQk()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.obtenerErrores(null==e.clave?null:e.clave.errors))}}function w(t,a){if(1&t&&o._UZ(0,"app-loader",19),2&t){const e=o.oxw();o.Q6J("title",e.loaderTexto)}}const I=[{path:"",component:(()=>{class t{constructor(e,r,i,l,c){this.router=e,this.authService=r,this.usuarioService=i,this.swalService=l,this.toastService=c,this.cargando=!1,this.loaderTexto="Iniciando Sesi\xf3n",this.listaUsuarios=[{correo:"posate6372@onlcool.com",clave:"111111"},{correo:"dedor27772@pyadu.com",clave:"111111"},{correo:"vifat71287@peogi.com",clave:"111111"}]}ngOnInit(){this.form=new s.cw({correo:new s.NI("",{validators:[(0,v.qc)()]}),clave:new s.NI("",{validators:[(0,v.$k)(6,100,null,!1)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){this.cargando=!0;let e=!1,r=!1;for(const l in this.form.controls)if(this.form.controls.hasOwnProperty(l)){const c=this.form.controls[l];c.errors&&(e=!0),(null==c.value||""==c.value)&&(r=!0)}let i="";e&&(i+="Hay campos con errores, por favor corr\xedjalos para iniciar sesi\xf3n. </br>"),(e||r)&&(this.toastService.error(i,"Aviso."),this.cargando=!1),!e&&!r&&this.loguearUsuario()}obtenerErrores(e){return Object.keys(e)}loguearUsuario(){var e=this;let r="";this.authService.logIn(this.correo?.value,this.clave?.value).then(function(){var i=(0,p.Z)(function*(l){let c=l.user?.uid;l.user?.emailVerified?null!=c?yield e.usuarioService.traerUsuarioPorId(c).then(d=>{if(null!=d){let m=d;m.habilitado==h.j.habilitado?(e.toastService.exito(`Bienvenido/a ${m.nombre}, ${m.apellido} !`,"Login exitoso!"),e.usuarioService.cargarUsuarioActual(m),setTimeout(()=>{e.router.navigate(["home"]),e.cargando=!1},1e3)):(e.authService.logOut(),e.swalService.error("Su cuenta no esta habilitada para iniciar sesi\xf3n."),e.cargando=!1)}else r="Ha ocurrido un error al intentar cargar los datos del usuario."}).catch(d=>{}):r="Ha ocurrido un error al intentar cargar los datos del usuario.":(e.authService.logOut(),e.usuarioService.limpiarUsuarioActual(),e.swalService.error("\xa1Debe verificar su correo electr\xf3nico! Por favor, revise su bandeja de entrada (incluyendo la carpeta de Spam) y haga clic en el enlace de verificaci\xf3n para completar el proceso."),e.cargando=!1),""!=r&&(e.toastService.error(r),e.cargando=!1)});return function(l){return i.apply(this,arguments)}}()).catch(i=>{switch(i.code){case"auth/invalid-email":r="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":r="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":r="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":r="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":r="Usuario no encontrado.";break;default:r="Ha ocurrido un error y no se pudo cargar el usuario."}""!=r&&(this.toastService.error(r,"Aviso."),this.cargando=!1)})}limpiarFormulario(){this.form.reset();for(const e in this.form.controls)this.form.controls.hasOwnProperty(e)&&this.form.controls[e].setValue("")}cargarUsuarioDefault(e){this.correo?.setValue(this.listaUsuarios[e].correo),this.clave?.setValue(this.listaUsuarios[e].clave)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(u.F0),o.Y36(b.e),o.Y36(y.i),o.Y36(U.J),o.Y36(Z.k))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:35,vars:4,consts:[[1,"container"],[1,"row","w-100","d-flex","justify-content-center","ml-0",2,"align-self","center"],[1,"col","col-12","justify-content-center","col-lg-6"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","routerLink","",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],["type","submit",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],[1,"mt-3"],["routerLink","../registro",1,""],[1,"btn","btn-secondary","m-1","fw-bold","fs-6",3,"click"],[3,"title",4,"ngIf"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],[3,"title"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),o.NdJ("ngSubmit",function(){return r.iniciarSesion()}),o.TgZ(5,"fieldset")(6,"legend"),o._uU(7,"Complete sus datos para ingresar"),o.qZA(),o.TgZ(8,"div")(9,"label",5),o._uU(10,"Ingrese su correo electr\xf3nico"),o.qZA(),o._UZ(11,"input",6),o.YNc(12,C,2,1,"ng-container",7),o.qZA(),o.TgZ(13,"div")(14,"label",8),o._uU(15,"Ingrese una contrase\xf1a"),o.qZA(),o._UZ(16,"input",9),o.YNc(17,A,2,1,"ng-container",7),o.qZA(),o.TgZ(18,"div")(19,"div",10)(20,"button",11),o._uU(21," Volver a bienvenido "),o.qZA(),o.TgZ(22,"button",12),o._uU(23," Ingresar "),o.qZA()(),o.TgZ(24,"label",13),o._uU(25,"\xbfNo posee una cuenta? Registrese "),o.TgZ(26,"a",14),o._uU(27,"AQUI"),o.qZA()()()()(),o.TgZ(28,"button",15),o.NdJ("click",function(){return r.cargarUsuarioDefault(0)}),o._uU(29,"Administrador"),o.qZA(),o.TgZ(30,"button",15),o.NdJ("click",function(){return r.cargarUsuarioDefault(1)}),o._uU(31,"Especialista"),o.qZA(),o.TgZ(32,"button",15),o.NdJ("click",function(){return r.cargarUsuarioDefault(2)}),o._uU(33,"Paciente"),o.qZA()()()()(),o.YNc(34,w,1,1,"app-loader",16)),2&e&&(o.xp6(4),o.Q6J("formGroup",r.form),o.xp6(8),o.Q6J("ngIf",null==r.correo?null:r.correo.errors),o.xp6(5),o.Q6J("ngIf",null==r.clave?null:r.clave.errors),o.xp6(17),o.Q6J("ngIf",r.cargando))},dependencies:[f.sg,f.O5,u.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,L.R],styles:[".error[_ngcontent-%COMP%]{color:red}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[u.Bz.forChild(I),u.Bz]}),t})();var J=n(4466);let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[f.ez,x,s.u5,s.UX,J.m]}),t})()}}]);