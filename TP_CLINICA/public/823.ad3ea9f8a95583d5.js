"use strict";(self.webpackChunkTP_CLINICA=self.webpackChunkTP_CLINICA||[]).push([[823],{5823:(T,h,a)=>{a.r(h),a.d(h,{LoginModule:()=>k});var g=a(6895),f=a(155),C=a(5861),n=a(4006),b=a(5708),s=a(4500),o=a(4650),m=a(7556),d=a(1209),S=a(9724),L=a(4876),O=a(4465),Z=a(605);function U(r,i){if(1&r&&(o.TgZ(0,"small",19),o._uU(1),o.qZA()),2&r){const e=i.$implicit,t=o.oxw(2);o.xp6(1),o.hij(" ",null==t.correo?null:t.correo.getError(e).mensaje," ")}}function w(r,i){if(1&r&&(o.ynx(0),o.YNc(1,U,2,1,"small",18),o.BQk()),2&r){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.obtenerErrores(null==e.correo?null:e.correo.errors))}}function _(r,i){if(1&r&&(o.TgZ(0,"small",19),o._uU(1),o.qZA()),2&r){const e=i.$implicit,t=o.oxw(2);o.xp6(1),o.hij(" ",null==t.clave?null:t.clave.getError(e).mensaje," ")}}function A(r,i){if(1&r&&(o.ynx(0),o.YNc(1,_,2,1,"small",18),o.BQk()),2&r){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.obtenerErrores(null==e.clave?null:e.clave.errors))}}function I(r,i){if(1&r){const e=o.EpF();o.TgZ(0,"div")(1,"button",20),o.NdJ("click",function(){const l=o.CHM(e).$implicit,u=o.oxw();return o.KtG(u.cargarUsuarioDefault(l))}),o._UZ(2,"img",21),o.qZA()()}if(2&r){const e=i.$implicit;o.xp6(2),o.MGl("src","",e.imagen," ",o.LSH)}}function P(r,i){if(1&r&&o._UZ(0,"app-loader",22),2&r){const e=o.oxw();o.Q6J("title",e.loaderTexto)}}const F=[{path:"",component:(()=>{class r{constructor(e,t,c,l,u,x){this.router=e,this.authService=t,this.usuarioService=c,this.swalService=l,this.logService=u,this.toastService=x,this.cargando=!1,this.loaderTexto="Iniciando Sesi\xf3n",this.listaUsuarios=[{correo:"takak82746@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u1.jpg"},{correo:"jiyivo3885@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u2.jpg"},{correo:"kecon57023@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u3.jpg"},{correo:"yosadoj637@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/m1.jpg"},{correo:"fowibis816@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/m2.jpg"},{correo:"ritakoh205@akoption.com",clave:"111111",imagen:"../assets/fotosPerfil/a1.png"}]}ngOnInit(){this.form=new n.cw({correo:new n.NI("",{validators:[(0,b.qc)()]}),clave:new n.NI("",{validators:[(0,b.$k)(6,100,null,!1)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){this.cargando=!0;let e=!1,t=!1;for(const l in this.form.controls)if(this.form.controls.hasOwnProperty(l)){const u=this.form.controls[l];u.errors&&(e=!0),(null==u.value||""==u.value)&&(t=!0)}let c="";e&&(c+="Hay campos con errores, por favor corr\xedjalos para iniciar sesi\xf3n. </br>"),(e||t)&&(this.toastService.error(c,"Aviso."),this.cargando=!1),!e&&!t&&this.loguearUsuario()}obtenerErrores(e){return Object.keys(e)}loguearUsuario(){var e=this;let t="";this.authService.logIn(this.correo?.value,this.clave?.value).then(function(){var c=(0,C.Z)(function*(l){let u=l.user?.uid;l.user?.emailVerified?null!=u?yield e.usuarioService.traerUsuarioPorId(u).then(y=>{if(null!=y){let p=y;if(p.habilitado==s.j.habilitado){let v={};v.usuario=p,v.dia=new Date,v.diaInt=v.dia.getTime(),e.logService.cargarItemSinIdAsignado(v).finally(()=>{e.toastService.exito(`Bienvenido/a ${p.nombre}, ${p.apellido} !`,"Login exitoso!"),e.usuarioService.cargarUsuarioActual(p),setTimeout(()=>{e.router.navigate(["home"]),e.cargando=!1},1e3)})}else e.authService.logOut(),e.swalService.error("Su cuenta no esta habilitada para iniciar sesi\xf3n."),e.cargando=!1}else t="Ha ocurrido un error al intentar cargar los datos del usuario."}).catch(y=>{}):t="Ha ocurrido un error al intentar cargar los datos del usuario.":(e.authService.logOut(),e.usuarioService.limpiarUsuarioActual(),e.swalService.error("\xa1Debe verificar su correo electr\xf3nico! Por favor, revise su bandeja de entrada (incluyendo la carpeta de Spam) y haga clic en el enlace de verificaci\xf3n para completar el proceso."),e.cargando=!1),""!=t&&(e.toastService.error(t),e.cargando=!1)});return function(l){return c.apply(this,arguments)}}()).catch(c=>{switch(c.code){case"auth/invalid-email":t="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":t="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":t="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":t="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":t="Usuario no encontrado.";break;default:t="Ha ocurrido un error y no se pudo cargar el usuario."}""!=t&&(this.toastService.error(t,"Aviso."),this.cargando=!1)})}limpiarFormulario(){this.form.reset();for(const e in this.form.controls)this.form.controls.hasOwnProperty(e)&&this.form.controls[e].setValue("")}cargarUsuarioDefault(e){this.correo?.setValue(e.correo),this.clave?.setValue(e.clave)}}return r.\u0275fac=function(e){return new(e||r)(o.Y36(f.F0),o.Y36(m.e),o.Y36(d.i),o.Y36(S.J),o.Y36(L.P),o.Y36(O.k))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-login"]],decls:31,vars:5,consts:[[1,"container","entrada"],[1,"row","w-100","d-flex","justify-content-center","ml-0",2,"align-self","center"],[1,"col","col-12","justify-content-center","col-lg-6"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","routerLink","",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],["type","submit",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],[1,"mt-3"],["routerLink","../registro",1,""],[1,"d-flex",2,"flex-wrap","wrap"],[4,"ngFor","ngForOf"],[3,"title",4,"ngIf"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],["type","button",1,"btn","botones",3,"click"],["width","50px",1,"img-foto",3,"src"],[3,"title"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),o.NdJ("ngSubmit",function(){return t.iniciarSesion()}),o.TgZ(5,"fieldset")(6,"legend"),o._uU(7,"Complete sus datos para ingresar"),o.qZA(),o.TgZ(8,"div")(9,"label",5),o._uU(10,"Ingrese su correo electr\xf3nico"),o.qZA(),o._UZ(11,"input",6),o.YNc(12,w,2,1,"ng-container",7),o.qZA(),o.TgZ(13,"div")(14,"label",8),o._uU(15,"Ingrese una contrase\xf1a"),o.qZA(),o._UZ(16,"input",9),o.YNc(17,A,2,1,"ng-container",7),o.qZA(),o.TgZ(18,"div")(19,"div",10)(20,"button",11),o._uU(21," Volver a bienvenido "),o.qZA(),o.TgZ(22,"button",12),o._uU(23," Ingresar "),o.qZA()(),o.TgZ(24,"label",13),o._uU(25,"\xbfNo posee una cuenta? Registrese "),o.TgZ(26,"a",14),o._uU(27,"AQUI"),o.qZA()()()(),o.TgZ(28,"div",15),o.YNc(29,I,3,1,"div",16),o.qZA()()()()()(),o.YNc(30,P,1,1,"app-loader",17)),2&e&&(o.xp6(4),o.Q6J("formGroup",t.form),o.xp6(8),o.Q6J("ngIf",null==t.correo?null:t.correo.errors),o.xp6(5),o.Q6J("ngIf",null==t.clave?null:t.clave.errors),o.xp6(12),o.Q6J("ngForOf",t.listaUsuarios),o.xp6(1),o.Q6J("ngIf",t.cargando))},dependencies:[g.sg,g.O5,f.rH,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,Z.R],styles:[".error[_ngcontent-%COMP%]{color:red}.botones[_ngcontent-%COMP%]{background:rgb(76,204,62);border-radius:50%;border:none}.img-foto[_ngcontent-%COMP%]{border-radius:50%;height:65px;width:65px}.entrada[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate-in-2-ccw .5s cubic-bezier(.25,.46,.45,.94) both}@keyframes _ngcontent-%COMP%_rotate-in-2-ccw{0%{transform:rotate(45deg);opacity:0}to{transform:rotate(0);opacity:1}}"]}),r})()}];let j=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[f.Bz.forChild(F),f.Bz]}),r})();var M=a(4466);let k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[g.ez,j,n.u5,n.UX,M.m]}),r})()},4465:(T,h,a)=>{a.d(h,{k:()=>C});var g=a(4650),f=a(3648);let C=(()=>{class n{constructor(s){this.toastr=s}exito(s="",o="",m=3e3){this.toastr.success(""!=s?s:"Se ha completado la operaci\xf3n con \xe9xito!.",""!=o?o:"Operaci\xf3n exitosa.",{toastClass:"toast-custom-success",timeOut:m,extendedTimeOut:1e3,enableHtml:!0,positionClass:"toast-custom-position"})}error(s="",o="",m=3e3){this.toastr.error(""!=s?s:"Ha ocurrido un error al procesar la operaci\xf3n.",""!=o?o:"Ha ocurrido un error.",{toastClass:"toast-custom-error",timeOut:m,extendedTimeOut:1e3,enableHtml:!0,positionClass:"toast-custom-position"})}informacion(s="",o="",m=3e3){this.toastr.success(""!=s?s:"",""!=o?o:"Aviso.",{toastClass:"toast-custom-info",timeOut:m,extendedTimeOut:1e3,enableHtml:!0,positionClass:"toast-custom-position"})}}return n.\u0275fac=function(s){return new(s||n)(g.LFG(f._W))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);