"use strict";(self.webpackChunkTP_CLINICA=self.webpackChunkTP_CLINICA||[]).push([[823],{5823:(k,S,d)=>{d.r(S),d.d(S,{LoginModule:()=>I});var b=d(6895),C=d(6378),Z=d(5861),v=d(4006),A=d(5708),O=d(4500),e=d(4650),M=d(7556),U=d(1209),V=d(9724),T=d(4465),u=d(605);function t(n,f){if(1&n&&(e.TgZ(0,"small",19),e._uU(1),e.qZA()),2&n){const r=f.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",null==i.correo?null:i.correo.getError(r).mensaje," ")}}function o(n,f){if(1&n&&(e.ynx(0),e.YNc(1,t,2,1,"small",18),e.BQk()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.correo?null:r.correo.errors))}}function l(n,f){if(1&n&&(e.TgZ(0,"small",19),e._uU(1),e.qZA()),2&n){const r=f.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",null==i.clave?null:i.clave.getError(r).mensaje," ")}}function a(n,f){if(1&n&&(e.ynx(0),e.YNc(1,l,2,1,"small",18),e.BQk()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.clave?null:r.clave.errors))}}function s(n,f){if(1&n){const r=e.EpF();e.TgZ(0,"div")(1,"button",20),e.NdJ("click",function(){const y=e.CHM(r).$implicit,E=e.oxw();return e.KtG(E.cargarUsuarioDefault(y))}),e._UZ(2,"img",21),e.qZA()()}if(2&n){const r=f.$implicit;e.xp6(2),e.MGl("src","",r.imagen," ",e.LSH)}}function c(n,f){if(1&n&&e._UZ(0,"app-loader",22),2&n){const r=e.oxw();e.Q6J("title",r.loaderTexto)}}const x=[{path:"",component:(()=>{class n{constructor(r,i,h,y,E){this.router=r,this.authService=i,this.usuarioService=h,this.swalService=y,this.toastService=E,this.cargando=!1,this.loaderTexto="Iniciando Sesi\xf3n",this.listaUsuarios=[{correo:"takak82746@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u1.jpg"},{correo:"jiyivo3885@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u2.jpg"},{correo:"kecon57023@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u3.jpg"},{correo:"yosadoj637@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/m1.jpg"},{correo:"fowibis816@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/m2.jpg"},{correo:"ritakoh205@akoption.com",clave:"111111",imagen:"../assets/fotosPerfil/a1.png"}]}ngOnInit(){this.form=new v.cw({correo:new v.NI("",{validators:[(0,A.qc)()]}),clave:new v.NI("",{validators:[(0,A.$k)(6,100,null,!1)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){this.cargando=!0;let r=!1,i=!1;for(const y in this.form.controls)if(this.form.controls.hasOwnProperty(y)){const E=this.form.controls[y];E.errors&&(r=!0),(null==E.value||""==E.value)&&(i=!0)}let h="";r&&(h+="Hay campos con errores, por favor corr\xedjalos para iniciar sesi\xf3n. </br>"),(r||i)&&(this.toastService.error(h,"Aviso."),this.cargando=!1),!r&&!i&&this.loguearUsuario()}obtenerErrores(r){return Object.keys(r)}loguearUsuario(){var r=this;let i="";this.authService.logIn(this.correo?.value,this.clave?.value).then(function(){var h=(0,Z.Z)(function*(y){let E=y.user?.uid;y.user?.emailVerified?null!=E?yield r.usuarioService.traerUsuarioPorId(E).then(j=>{if(null!=j){let L=j;L.habilitado==O.j.habilitado?(r.toastService.exito(`Bienvenido/a ${L.nombre}, ${L.apellido} !`,"Login exitoso!"),r.usuarioService.cargarUsuarioActual(L),setTimeout(()=>{r.router.navigate(["home"]),r.cargando=!1},1e3)):(r.authService.logOut(),r.swalService.error("Su cuenta no esta habilitada para iniciar sesi\xf3n."),r.cargando=!1)}else i="Ha ocurrido un error al intentar cargar los datos del usuario."}).catch(j=>{}):i="Ha ocurrido un error al intentar cargar los datos del usuario.":(r.authService.logOut(),r.usuarioService.limpiarUsuarioActual(),r.swalService.error("\xa1Debe verificar su correo electr\xf3nico! Por favor, revise su bandeja de entrada (incluyendo la carpeta de Spam) y haga clic en el enlace de verificaci\xf3n para completar el proceso."),r.cargando=!1),""!=i&&(r.toastService.error(i),r.cargando=!1)});return function(y){return h.apply(this,arguments)}}()).catch(h=>{switch(h.code){case"auth/invalid-email":i="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":i="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":i="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":i="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":i="Usuario no encontrado.";break;default:i="Ha ocurrido un error y no se pudo cargar el usuario."}""!=i&&(this.toastService.error(i,"Aviso."),this.cargando=!1)})}limpiarFormulario(){this.form.reset();for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}cargarUsuarioDefault(r){this.correo?.setValue(r.correo),this.clave?.setValue(r.clave)}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(C.F0),e.Y36(M.e),e.Y36(U.i),e.Y36(V.J),e.Y36(T.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:31,vars:5,consts:[[1,"container"],[1,"row","w-100","d-flex","justify-content-center","ml-0",2,"align-self","center"],[1,"col","col-12","justify-content-center","col-lg-6"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","routerLink","",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],["type","submit",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],[1,"mt-3"],["routerLink","../registro",1,""],[1,"d-flex",2,"flex-wrap","wrap"],[4,"ngFor","ngForOf"],[3,"title",4,"ngIf"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],["type","button",1,"btn","botones",3,"click"],["width","50px",1,"img-foto",3,"src"],[3,"title"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return i.iniciarSesion()}),e.TgZ(5,"fieldset")(6,"legend"),e._uU(7,"Complete sus datos para ingresar"),e.qZA(),e.TgZ(8,"div")(9,"label",5),e._uU(10,"Ingrese su correo electr\xf3nico"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,o,2,1,"ng-container",7),e.qZA(),e.TgZ(13,"div")(14,"label",8),e._uU(15,"Ingrese una contrase\xf1a"),e.qZA(),e._UZ(16,"input",9),e.YNc(17,a,2,1,"ng-container",7),e.qZA(),e.TgZ(18,"div")(19,"div",10)(20,"button",11),e._uU(21," Volver a bienvenido "),e.qZA(),e.TgZ(22,"button",12),e._uU(23," Ingresar "),e.qZA()(),e.TgZ(24,"label",13),e._uU(25,"\xbfNo posee una cuenta? Registrese "),e.TgZ(26,"a",14),e._uU(27,"AQUI"),e.qZA()()()(),e.TgZ(28,"div",15),e.YNc(29,s,3,1,"div",16),e.qZA()()()()()(),e.YNc(30,c,1,1,"app-loader",17)),2&r&&(e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(8),e.Q6J("ngIf",null==i.correo?null:i.correo.errors),e.xp6(5),e.Q6J("ngIf",null==i.clave?null:i.clave.errors),e.xp6(12),e.Q6J("ngForOf",i.listaUsuarios),e.xp6(1),e.Q6J("ngIf",i.cargando))},dependencies:[b.sg,b.O5,C.rH,v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,u.R],styles:[".error[_ngcontent-%COMP%]{color:red}.botones[_ngcontent-%COMP%]{background:rgb(76,204,62);border-radius:50%;border:none}.img-foto[_ngcontent-%COMP%]{border-radius:50%;height:65px;width:65px}"]}),n})()}];let m=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[C.Bz.forChild(x),C.Bz]}),n})();var p=d(4466);let I=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[b.ez,m,v.u5,v.UX,p.m]}),n})()},5708:(k,S,d)=>{d.d(S,{$k:()=>Z,FQ:()=>U,Ms:()=>C,U5:()=>A,j8:()=>e,qc:()=>v,qe:()=>V,sH:()=>M,wb:()=>T,y$:()=>O});var b=d(4004);function C(u,t,o=null){return l=>{const a=l,s={};return""==a?.value||null==a?.value||null==a?.value?s.campoVacio={hayError:!0,mensaje:null!=o&&null!=o.campoVacio?o.campoVacio:"Campo requerido."}:isNaN(a?.value)||a?.value?.includes(".")||a?.value?.includes(",")?s.textoInvalido={hayError:!0,mensaje:null!=o&&null!=o.textoInvalido?o.textoInvalido:"Solo se pueden ingresar caracteres num\xe9ricos."}:(a?.value<u||a?.value>t)&&(s.valorInvalido={hayError:!0,mensaje:null!=o&&null!=o.valorInvalido?o.valorInvalido:`Solo se admiten valores entre ${u} y ${t}.`}),Object.keys(s).length?(a?.setErrors(s),s):(a?.setErrors(null),null)}}function Z(u,t,o=null,l=!1,a=!0){return s=>{const c=s,g={};let x=null==c?.value||null==c?.value||""==c?.value.trim();return x?g.campoVacio={hayError:!0,mensaje:null!=o&&null!=o.campoVacio?o.campoVacio:"Campo requerido."}:c?.value.length<u?g.lenMinimo={hayError:!0,mensaje:null!=o&&null!=o.lenMinimo?o.lenMinimo:`Solo se admite un m\xednimo de ${u} caracteres.`}:c?.value.length>t&&(g.lenMaximo={hayError:!0,mensaje:null!=o&&null!=o.lenMaximo?o.lenMaximo:`Solo se admite un m\xe1ximo de ${t} caracteres.`}),l?!x&&!(a?/^[a-zA-Z\s]+$/:/^[a-zA-Z]+$/).test(c.value)&&(g.textoInvalido={hayError:!0,mensaje:null!=o&&null!=o.textoInvalido?o.textoInvalido:`Solo se admiten letras a-z ${a?"":"(sin espacios)"}.`}):a||!x&&/\s/.test(c.value)&&(g.textoInvalido={hayError:!0,mensaje:null!=o&&null!=o.textoInvalido?o.textoInvalido:"No se admiten espacios."}),Object.keys(g).length?(c?.setErrors(g),g):(c?.setErrors(null),null)}}function v(){return u=>{const t=u,l={};return null==t?.value||null==t?.value||""==t?.value.trim()?l.campoVacio={hayError:!0,mensaje:"Campo requerido."}:/^([a-zA-Z0-9_\.]+@+[a-zA-Z]+(\.)+[a-zA-Z]{2,3})$/.test(u.value)||(l.formatoInvalido={hayError:!0,mensaje:"El formato de correo electr\xf3nico es invalido. "}),Object.keys(l).length?(t?.setErrors(l),l):(t?.setErrors(null),null)}}function A(u){return t=>{const o=t.get("clave"),l=t.get("confirmarClave"),a={};return o?.value!==l?.value&&(a.clavesDistintas={hayError:!0,mensaje:"Las clave y confirmaci\xf3n NO conciden."}),null==l?.value||null==l?.value||""==l?.value.trim()?a.campoVacio={hayError:!0,mensaje:"Campo requerido."}:l?.value.length<u&&(a.longitudInvalida={hayError:!0,mensaje:`La confirmaci\xf3n de clave debe contener por lo menos ${u} caracteres. \n`}),Object.keys(a).length?(l?.setErrors(a),a):(l?.setErrors(null),null)}}function O(u,t,o){return l=>{t.validando=!0;const a=o.eliminarEspaciosYPasarAMin_May(l.value),s={};return u.traerListaDeCorreosFiltradaConObservable(a).pipe((0,b.U)(c=>c.length>0&&(s.datoExistente={hayError:!0,mensaje:"El correo electr\xf3nico ingresado ya existe."},Object.keys(s).length)?(l?.setErrors(s),t.validando=!1,s):(l?.setErrors(null),t.validando=!1,null)))}}function e(u,t){return o=>{t.validando=!0;const a={};return u.traerListaDeDniFiltradaConObservable(o.value).pipe((0,b.U)(s=>s.length>0&&(a.datoExistente={hayError:!0,mensaje:"El dni ingresado ya se encuentra cargado en el sistema."},Object.keys(a).length)?(o?.setErrors(a),t.validando=!1,a):(o?.setErrors(null),t.validando=!1,null)))}}function M(u,t,o){return l=>{t.validando=!0;const a=o.eliminarEspaciosYPasarAMin_May(l.value),s={};return u.traerListaDeEspecialidadesFiltradaConObservable(a).pipe((0,b.U)(c=>c.length>0&&(s.datoExistente={hayError:!0,mensaje:"La especialidad ingresada ya existe."},Object.keys(s).length)?(l?.setErrors(s),t.validando=!1,s):l?.errors?(t.validando=!1,l?.errors):(l?.setErrors(null),t.validando=!1,null)))}}function U(){return u=>{const t=u,o={};if(""==t?.value||null==t?.value||null==t?.value)o.campoVacio={hayError:!0,mensaje:"Campo requerido."};else{var l=t?.value,a=l.lastIndexOf(".")+1,s=l.substr(a,l.length).toLowerCase();"jpg"!=s&&"jpeg"!=s&&"png"!=s&&(o.archivoInvalido={hayError:!0,mensaje:"Solo se admiten archivos de tipo jpg | jpeg | png."})}return Object.keys(o).length?(t?.setErrors(o),o):(t?.setErrors(null),null)}}function V(){return u=>{const t=u,o=[];return(""==t?.value||null==t?.value||null==t?.value||-1==t?.value)&&(o.campoVacio={hayError:!0,mensaje:"Campo requerido."}),Object.keys(o).length?(t?.setErrors(o),o):(t?.setErrors(null),null)}}function T(u,t,o,l,a=null,s=!1,c=!0){return g=>{const x=g.get(o),m=g.get(l);if(x&&x.value){const p={};let I=null==m?.value||null==m?.value||""==m?.value.trim();if(I?p.campoVacio={hayError:!0,mensaje:null!=a&&null!=a.campoVacio?a.campoVacio:"Campo requerido."}:m?.value.length<u?p.lenMinimo={hayError:!0,mensaje:null!=a&&null!=a.lenMinimo?a.lenMinimo:`Solo se admite un m\xednimo de ${u} caracteres.`}:m?.value.length>t&&(p.lenMaximo={hayError:!0,mensaje:null!=a&&null!=a.lenMaximo?a.lenMaximo:`Solo se admite un m\xe1ximo de ${t} caracteres.`}),s?!I&&!(c?/^[a-zA-Z\s]+$/:/^[a-zA-Z]+$/).test(m?.value)&&(p.textoInvalido={hayError:!0,mensaje:null!=a&&null!=a.textoInvalido?a.textoInvalido:`Solo se admiten letras a-z ${c?"":"(sin espacios)"}.`}):c||!I&&/\s/.test(m?.value)&&(p.textoInvalido={hayError:!0,mensaje:null!=a&&null!=a.textoInvalido?a.textoInvalido:"No se admiten espacios."}),Object.keys(p).length)return m?.setErrors(p),p}return m?.setErrors(null),null}}}}]);