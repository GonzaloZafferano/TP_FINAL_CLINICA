"use strict";(self.webpackChunkTP_CLINICA=self.webpackChunkTP_CLINICA||[]).push([[823],{5823:(j,S,d)=>{d.r(S),d.d(S,{LoginModule:()=>I});var b=d(6895),C=d(6378),Z=d(5861),v=d(4006),A=d(5708),O=d(4500),e=d(4650),M=d(7556),U=d(1209),V=d(9724),T=d(4465),c=d(605);function n(t,f){if(1&t&&(e.TgZ(0,"small",19),e._uU(1),e.qZA()),2&t){const r=f.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",null==i.correo?null:i.correo.getError(r).mensaje," ")}}function o(t,f){if(1&t&&(e.ynx(0),e.YNc(1,n,2,1,"small",18),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.correo?null:r.correo.errors))}}function l(t,f){if(1&t&&(e.TgZ(0,"small",19),e._uU(1),e.qZA()),2&t){const r=f.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",null==i.clave?null:i.clave.getError(r).mensaje," ")}}function a(t,f){if(1&t&&(e.ynx(0),e.YNc(1,l,2,1,"small",18),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.clave?null:r.clave.errors))}}function s(t,f){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"button",20),e.NdJ("click",function(){const y=e.CHM(r).$implicit,E=e.oxw();return e.KtG(E.cargarUsuarioDefault(y))}),e._UZ(2,"img",21),e.qZA()()}if(2&t){const r=f.$implicit;e.xp6(2),e.MGl("src","",r.imagen," ",e.LSH)}}function u(t,f){if(1&t&&e._UZ(0,"app-loader",22),2&t){const r=e.oxw();e.Q6J("title",r.loaderTexto)}}const x=[{path:"",component:(()=>{class t{constructor(r,i,h,y,E){this.router=r,this.authService=i,this.usuarioService=h,this.swalService=y,this.toastService=E,this.cargando=!1,this.loaderTexto="Iniciando Sesi\xf3n",this.listaUsuarios=[{correo:"sayelef832@onlcool.com",clave:"111111",imagen:"../assets/fotosPerfil/u1.jpg"},{correo:"dofihip268@peogi.com",clave:"111111",imagen:"../assets/fotosPerfil/u2.jpg"},{correo:"fovof96689@onlcool.com",clave:"111111",imagen:"../assets/fotosPerfil/u3.jpg"},{correo:"fiwobiy306@peogi.com",clave:"111111",imagen:"../assets/fotosPerfil/m1.jpg"},{correo:"jinove3065@onlcool.com",clave:"111111",imagen:"../assets/fotosPerfil/m2.jpg"},{correo:"wafisep178@onlcool.com",clave:"111111",imagen:"../assets/fotosPerfil/a1.png"}]}ngOnInit(){this.form=new v.cw({correo:new v.NI("",{validators:[(0,A.qc)()]}),clave:new v.NI("",{validators:[(0,A.$k)(6,100,null,!1)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){this.cargando=!0;let r=!1,i=!1;for(const y in this.form.controls)if(this.form.controls.hasOwnProperty(y)){const E=this.form.controls[y];E.errors&&(r=!0),(null==E.value||""==E.value)&&(i=!0)}let h="";r&&(h+="Hay campos con errores, por favor corr\xedjalos para iniciar sesi\xf3n. </br>"),(r||i)&&(this.toastService.error(h,"Aviso."),this.cargando=!1),!r&&!i&&this.loguearUsuario()}obtenerErrores(r){return Object.keys(r)}loguearUsuario(){var r=this;let i="";this.authService.logIn(this.correo?.value,this.clave?.value).then(function(){var h=(0,Z.Z)(function*(y){let E=y.user?.uid;y.user?.emailVerified?null!=E?yield r.usuarioService.traerUsuarioPorId(E).then(w=>{if(null!=w){let L=w;L.habilitado==O.j.habilitado?(r.toastService.exito(`Bienvenido/a ${L.nombre}, ${L.apellido} !`,"Login exitoso!"),r.usuarioService.cargarUsuarioActual(L),setTimeout(()=>{r.router.navigate(["home"]),r.cargando=!1},1e3)):(r.authService.logOut(),r.swalService.error("Su cuenta no esta habilitada para iniciar sesi\xf3n."),r.cargando=!1)}else i="Ha ocurrido un error al intentar cargar los datos del usuario."}).catch(w=>{}):i="Ha ocurrido un error al intentar cargar los datos del usuario.":(r.authService.logOut(),r.usuarioService.limpiarUsuarioActual(),r.swalService.error("\xa1Debe verificar su correo electr\xf3nico! Por favor, revise su bandeja de entrada (incluyendo la carpeta de Spam) y haga clic en el enlace de verificaci\xf3n para completar el proceso."),r.cargando=!1),""!=i&&(r.toastService.error(i),r.cargando=!1)});return function(y){return h.apply(this,arguments)}}()).catch(h=>{switch(h.code){case"auth/invalid-email":i="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":i="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":i="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":i="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":i="Usuario no encontrado.";break;default:i="Ha ocurrido un error y no se pudo cargar el usuario."}""!=i&&(this.toastService.error(i,"Aviso."),this.cargando=!1)})}limpiarFormulario(){this.form.reset();for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}cargarUsuarioDefault(r){this.correo?.setValue(r.correo),this.clave?.setValue(r.clave)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(C.F0),e.Y36(M.e),e.Y36(U.i),e.Y36(V.J),e.Y36(T.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:31,vars:5,consts:[[1,"container"],[1,"row","w-100","d-flex","justify-content-center","ml-0",2,"align-self","center"],[1,"col","col-12","justify-content-center","col-lg-6"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","routerLink","",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],["type","submit",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],[1,"mt-3"],["routerLink","../registro",1,""],[1,"d-flex",2,"flex-wrap","wrap"],[4,"ngFor","ngForOf"],[3,"title",4,"ngIf"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],["type","button",1,"btn","botones",3,"click"],["width","50px",1,"img-foto",3,"src"],[3,"title"]],template:function(r,i){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return i.iniciarSesion()}),e.TgZ(5,"fieldset")(6,"legend"),e._uU(7,"Complete sus datos para ingresar"),e.qZA(),e.TgZ(8,"div")(9,"label",5),e._uU(10,"Ingrese su correo electr\xf3nico"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,o,2,1,"ng-container",7),e.qZA(),e.TgZ(13,"div")(14,"label",8),e._uU(15,"Ingrese una contrase\xf1a"),e.qZA(),e._UZ(16,"input",9),e.YNc(17,a,2,1,"ng-container",7),e.qZA(),e.TgZ(18,"div")(19,"div",10)(20,"button",11),e._uU(21," Volver a bienvenido "),e.qZA(),e.TgZ(22,"button",12),e._uU(23," Ingresar "),e.qZA()(),e.TgZ(24,"label",13),e._uU(25,"\xbfNo posee una cuenta? Registrese "),e.TgZ(26,"a",14),e._uU(27,"AQUI"),e.qZA()()()(),e.TgZ(28,"div",15),e.YNc(29,s,3,1,"div",16),e.qZA()()()()()(),e.YNc(30,u,1,1,"app-loader",17)),2&r&&(e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(8),e.Q6J("ngIf",null==i.correo?null:i.correo.errors),e.xp6(5),e.Q6J("ngIf",null==i.clave?null:i.clave.errors),e.xp6(12),e.Q6J("ngForOf",i.listaUsuarios),e.xp6(1),e.Q6J("ngIf",i.cargando))},dependencies:[b.sg,b.O5,C.rH,v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,c.R],styles:[".error[_ngcontent-%COMP%]{color:red}.botones[_ngcontent-%COMP%]{background:rgb(76,204,62);border-radius:50%;border:none}.img-foto[_ngcontent-%COMP%]{border-radius:50%;height:65px;width:65px}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[C.Bz.forChild(x),C.Bz]}),t})();var g=d(4466);let I=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[b.ez,m,v.u5,v.UX,g.m]}),t})()},5708:(j,S,d)=>{d.d(S,{$k:()=>Z,FQ:()=>U,Ms:()=>C,U5:()=>A,j8:()=>e,qc:()=>v,qe:()=>V,sH:()=>M,wb:()=>T,y$:()=>O});var b=d(4004);function C(c,n,o=null){return l=>{const a=l,s={};return""==a?.value||null==a?.value||null==a?.value?s.campoVacio={hayError:!0,mensaje:null!=o&&null!=o.campoVacio?o.campoVacio:"Campo requerido."}:isNaN(a?.value)||a?.value?.includes(".")||a?.value?.includes(",")?s.textoInvalido={hayError:!0,mensaje:null!=o&&null!=o.textoInvalido?o.textoInvalido:"Solo se pueden ingresar caracteres num\xe9ricos."}:(a?.value<c||a?.value>n)&&(s.valorInvalido={hayError:!0,mensaje:null!=o&&null!=o.valorInvalido?o.valorInvalido:`Solo se admiten valores entre ${c} y ${n}.`}),Object.keys(s).length?(a?.setErrors(s),s):(a?.setErrors(null),null)}}function Z(c,n,o=null,l=!1,a=!0){return s=>{const u=s,p={};let x=null==u?.value||null==u?.value||""==u?.value.trim();return x?p.campoVacio={hayError:!0,mensaje:null!=o&&null!=o.campoVacio?o.campoVacio:"Campo requerido."}:u?.value.length<c?p.lenMinimo={hayError:!0,mensaje:null!=o&&null!=o.lenMinimo?o.lenMinimo:`Solo se admite un m\xednimo de ${c} caracteres.`}:u?.value.length>n&&(p.lenMaximo={hayError:!0,mensaje:null!=o&&null!=o.lenMaximo?o.lenMaximo:`Solo se admite un m\xe1ximo de ${n} caracteres.`}),l?!x&&!(a?/^[a-zA-Z\s]+$/:/^[a-zA-Z]+$/).test(u.value)&&(p.textoInvalido={hayError:!0,mensaje:null!=o&&null!=o.textoInvalido?o.textoInvalido:`Solo se admiten letras a-z ${a?"":"(sin espacios)"}.`}):a||!x&&/\s/.test(u.value)&&(p.textoInvalido={hayError:!0,mensaje:null!=o&&null!=o.textoInvalido?o.textoInvalido:"No se admiten espacios."}),Object.keys(p).length?(u?.setErrors(p),p):(u?.setErrors(null),null)}}function v(){return c=>{const n=c,l={};return null==n?.value||null==n?.value||""==n?.value.trim()?l.campoVacio={hayError:!0,mensaje:"Campo requerido."}:/^([a-zA-Z0-9_\.]+@+[a-zA-Z]+(\.)+[a-zA-Z]{2,3})$/.test(c.value)||(l.formatoInvalido={hayError:!0,mensaje:"El formato de correo electr\xf3nico es invalido. "}),Object.keys(l).length?(n?.setErrors(l),l):(n?.setErrors(null),null)}}function A(c){return n=>{const o=n.get("clave"),l=n.get("confirmarClave"),a={};return o?.value!==l?.value&&(a.clavesDistintas={hayError:!0,mensaje:"Las clave y confirmaci\xf3n NO conciden."}),null==l?.value||null==l?.value||""==l?.value.trim()?a.campoVacio={hayError:!0,mensaje:"Campo requerido."}:l?.value.length<c&&(a.longitudInvalida={hayError:!0,mensaje:`La confirmaci\xf3n de clave debe contener por lo menos ${c} caracteres. \n`}),Object.keys(a).length?(l?.setErrors(a),a):(l?.setErrors(null),null)}}function O(c,n,o){return l=>{n.validando=!0;const a=o.eliminarEspaciosYPasarAMin_May(l.value),s={};return c.traerListaDeCorreosFiltradaConObservable(a).pipe((0,b.U)(u=>u.length>0&&(s.datoExistente={hayError:!0,mensaje:"El correo electr\xf3nico ingresado ya existe."},Object.keys(s).length)?(l?.setErrors(s),n.validando=!1,s):(l?.setErrors(null),n.validando=!1,null)))}}function e(c,n){return o=>{n.validando=!0;const a={};return c.traerListaDeDniFiltradaConObservable(o.value).pipe((0,b.U)(s=>s.length>0&&(a.datoExistente={hayError:!0,mensaje:"El dni ingresado ya se encuentra cargado en el sistema."},Object.keys(a).length)?(o?.setErrors(a),n.validando=!1,a):(o?.setErrors(null),n.validando=!1,null)))}}function M(c,n,o){return l=>{n.validando=!0;const a=o.eliminarEspaciosYPasarAMin_May(l.value),s={};return c.traerListaDeEspecialidadesFiltradaConObservable(a).pipe((0,b.U)(u=>u.length>0&&(s.datoExistente={hayError:!0,mensaje:"La especialidad ingresada ya existe."},Object.keys(s).length)?(l?.setErrors(s),n.validando=!1,s):l?.errors?(n.validando=!1,l?.errors):(l?.setErrors(null),n.validando=!1,null)))}}function U(){return c=>{const n=c,o={};if(""==n?.value||null==n?.value||null==n?.value)o.campoVacio={hayError:!0,mensaje:"Campo requerido."};else{var l=n?.value,a=l.lastIndexOf(".")+1,s=l.substr(a,l.length).toLowerCase();"jpg"!=s&&"jpeg"!=s&&"png"!=s&&(o.archivoInvalido={hayError:!0,mensaje:"Solo se admiten archivos de tipo jpg | jpeg | png."})}return Object.keys(o).length?(n?.setErrors(o),o):(n?.setErrors(null),null)}}function V(){return c=>{const n=c,o=[];return(""==n?.value||null==n?.value||null==n?.value||-1==n?.value)&&(o.campoVacio={hayError:!0,mensaje:"Campo requerido."}),Object.keys(o).length?(n?.setErrors(o),o):(n?.setErrors(null),null)}}function T(c,n,o,l,a=null,s=!1,u=!0){return p=>{const x=p.get(o),m=p.get(l);if(x&&x.value){const g={};let I=null==m?.value||null==m?.value||""==m?.value.trim();if(I?g.campoVacio={hayError:!0,mensaje:null!=a&&null!=a.campoVacio?a.campoVacio:"Campo requerido."}:m?.value.length<c?g.lenMinimo={hayError:!0,mensaje:null!=a&&null!=a.lenMinimo?a.lenMinimo:`Solo se admite un m\xednimo de ${c} caracteres.`}:m?.value.length>n&&(g.lenMaximo={hayError:!0,mensaje:null!=a&&null!=a.lenMaximo?a.lenMaximo:`Solo se admite un m\xe1ximo de ${n} caracteres.`}),s?!I&&!(u?/^[a-zA-Z\s]+$/:/^[a-zA-Z]+$/).test(m?.value)&&(g.textoInvalido={hayError:!0,mensaje:null!=a&&null!=a.textoInvalido?a.textoInvalido:`Solo se admiten letras a-z ${u?"":"(sin espacios)"}.`}):u||!I&&/\s/.test(m?.value)&&(g.textoInvalido={hayError:!0,mensaje:null!=a&&null!=a.textoInvalido?a.textoInvalido:"No se admiten espacios."}),Object.keys(g).length)return m?.setErrors(g),g}return m?.setErrors(null),null}}}}]);