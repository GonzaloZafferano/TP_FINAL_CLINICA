"use strict";(self.webpackChunkTP_CLINICA=self.webpackChunkTP_CLINICA||[]).push([[771],{8771:(ie,g,r)=>{r.r(g),r.d(g,{SolicitarTurnoModule:()=>ee});var l=r(6895),_=r(6378),T=r(5861),h=r(3474),e=r(4650);let x=(()=>{class t{transform(i){return i.apellido+" "+i.nombre+" - DNI:"+i.dni+" - "+h.L[i.perfil]}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=e.Yjl({name:"usuario",type:t,pure:!0}),t})(),v=(()=>{class t{transform(i){return Array.isArray(i)&&0!==i.length?i.sort((n,s)=>`${n.apellido} ${n.nombre}`.localeCompare(`${s.apellido} ${s.nombre}`)):i}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=e.Yjl({name:"sortByNameAndLastName",type:t,pure:!0}),t})();var S=r(1209),C=r(2668),b=r(9724),E=r(4465),O=r(5113),w=r(605),A=r(2189),P=r(116),Z=r(2150);function N(t,o){1&t&&(e.TgZ(0,"div",5)(1,"span",6),e._uU(2,"Cargando..."),e.qZA(),e._UZ(3,"div",7),e.qZA())}function y(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",11),e.NdJ("click",function(){const a=e.CHM(i).$implicit,c=e.oxw(4);return e.KtG(c.seleccionFila(a))}),e.TgZ(2,"p",12),e._uU(3),e.ALo(4,"turnos"),e.qZA(),e.TgZ(5,"button",13),e.NdJ("click",function(){const a=e.CHM(i).$implicit,c=e.oxw(4);return e.KtG(c.seleccionTurno(a))}),e._uU(6,"Solicitar Turno"),e.qZA()()()}if(2&t){const i=o.$implicit,n=e.oxw(4);e.xp6(1),e.ekj("fila-seleccionada",null!=n.filaSeleccionada&&i.id===n.filaSeleccionada.id),e.xp6(2),e.Oqu(e.xi3(4,3,i,!1))}}function L(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,y,7,6,"div",10),e.ALo(2,"sortBySeconds"),e.qZA()),2&t){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i.turnos))}}function M(t,o){if(1&t&&(e.ynx(0),e.YNc(1,L,3,3,"div",9),e.BQk()),2&t){const i=e.oxw(2),n=e.MAs(8);e.xp6(1),e.Q6J("ngIf",i.turnos.length>0)("ngIfElse",n)}}function I(t,o){if(1&t&&e.YNc(0,M,2,2,"ng-container",8),2&t){const i=e.oxw();e.Q6J("ngIf",i.turnos)}}function U(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1,"El especialista seleccionado NO TIENE turnos disponibles para la especialidad seleccionada."),e.qZA())}let F=(()=>{class t{constructor(){this.spinner=!1,this.turnos=null,this.OnSeleccionTurno=new e.vpe}seleccionTurno(i){this.OnSeleccionTurno.emit(i)}seleccionFila(i){this.filaSeleccionada=i}ngOnChanges(i){this.filaSeleccionada=null}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lista-turnos"]],inputs:{spinner:"spinner",turnos:"turnos"},outputs:{OnSeleccionTurno:"OnSeleccionTurno"},features:[e.TTD],decls:9,vars:2,consts:[[2,"height","500px","overflow-y","auto"],[1,"border","p-2","w-100","bg-dark","text-light"],["class","d-flex justify-content-around",4,"ngIf","ngIfElse"],["lista",""],["sinTurnos",""],[1,"d-flex","justify-content-around"],[1,"fs-3","fw-bold"],[1,"spinner-border","text-danger","text-center",2,"align-self","center","scale","1.2"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","custom-pointer","mx-0","border","bg-light","text-dark",2,"align-items","center",3,"click"],[1,"m-2"],[1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2","custom-font-data",3,"click"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3,"Turnos Disponibles"),e.qZA(),e.YNc(4,N,4,0,"div",2),e.YNc(5,I,1,1,"ng-template",null,3,e.W1O),e.YNc(7,U,2,0,"ng-template",null,4,e.W1O),e.qZA()()),2&i){const s=e.MAs(6);e.xp6(4),e.Q6J("ngIf",n.spinner)("ngIfElse",s)}},dependencies:[l.sg,l.O5,P._,Z.o],styles:[".custom-font-headers[_ngcontent-%COMP%]{font-size:1.4em!important;font-weight:700!important}.custom-font-data[_ngcontent-%COMP%]{font-size:1.03em!important;word-wrap:break-word;font-weight:700}.fila-seleccionada[_ngcontent-%COMP%]{background-color:#009331!important;color:#fff!important;font-weight:700!important}.custom-font[_ngcontent-%COMP%]{font-size:3em!important;font-weight:700!important}.custom-pointer[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:100px}.imagen-usuario[_ngcontent-%COMP%]{border-radius:100px;width:100px}.textarea[_ngcontent-%COMP%]{resize:none;height:100%}.nueva-especialidad[_ngcontent-%COMP%]{color:red;font-weight:bolder;font-size:1.03em}.columna[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center!important}"]}),t})(),Y=(()=>{class t{transform(i){let n="";if(i){n=i.nombre+" "+i.apellido;let s="";if(i.especialidades&&i.especialidades.length>0)for(let a=0;a<i.especialidades.length;a++)""!=s?s+=" - "+i.especialidades[a].nombre:s=" - Especialidades:  "+i.especialidades[a].nombre;n+=s}return n}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=e.Yjl({name:"especialistas",type:t,pure:!0}),t})();function k(t,o){1&t&&(e.TgZ(0,"div",5)(1,"span",6),e._uU(2,"Cargando..."),e.qZA(),e._UZ(3,"div",7),e.qZA())}function D(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",11),e.NdJ("click",function(){const a=e.CHM(i).$implicit,c=e.oxw(4);return e.KtG(c.seleccionEspecialista(a))}),e.TgZ(2,"p",12),e._uU(3),e.ALo(4,"especialistas"),e.qZA()()()}if(2&t){const i=o.$implicit,n=e.oxw(4);e.xp6(1),e.ekj("fila-seleccionada",null!=n.filaSeleccionada&&i.id===n.filaSeleccionada.id),e.xp6(2),e.Oqu(e.lcZ(4,3,i))}}function J(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,D,5,5,"div",10),e.qZA()),2&t){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.especialistas)}}function B(t,o){if(1&t&&(e.ynx(0),e.YNc(1,J,2,1,"div",9),e.BQk()),2&t){const i=e.oxw(2),n=e.MAs(8);e.xp6(1),e.Q6J("ngIf",i.especialistas.length>0)("ngIfElse",n)}}function j(t,o){if(1&t&&e.YNc(0,B,2,2,"ng-container",8),2&t){const i=e.oxw();e.Q6J("ngIf",i.especialistas)}}function z(t,o){1&t&&(e.TgZ(0,"h2"),e._uU(1,"La especialidad seleccionada NO CUENTA con especialistas por el momento."),e.qZA())}let Q=(()=>{class t{constructor(){this.spinner=!1,this.titulo="Lista de Especialistas",this.OnSeleccionEspecialista=new e.vpe}seleccionEspecialista(i){this.filaSeleccionada=i,this.OnSeleccionEspecialista.emit(i)}ngOnChanges(i){this.filaSeleccionada=null}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lista-especialistas"]],inputs:{spinner:"spinner",especialistas:"especialistas",titulo:"titulo"},outputs:{OnSeleccionEspecialista:"OnSeleccionEspecialista"},features:[e.TTD],decls:9,vars:3,consts:[[2,"height","500px","overflow-y","auto"],[1,"border","p-2","w-100","bg-dark","text-light"],["class","d-flex justify-content-around",4,"ngIf","ngIfElse"],["lista",""],["sinEspecialistas",""],[1,"d-flex","justify-content-around"],[1,"fs-3","fw-bold"],[1,"spinner-border","text-danger","text-center",2,"align-self","center","scale","1.2"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","custom-pointer","mx-0","border","bg-light","text-dark",3,"click"],[1,"m-2","custom-font-data"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.qZA(),e.YNc(4,k,4,0,"div",2),e.YNc(5,j,1,1,"ng-template",null,3,e.W1O),e.YNc(7,z,2,0,"ng-template",null,4,e.W1O),e.qZA()()),2&i){const s=e.MAs(6);e.xp6(3),e.Oqu(n.titulo),e.xp6(1),e.Q6J("ngIf",n.spinner)("ngIfElse",s)}},dependencies:[l.sg,l.O5,Y],styles:[".custom-font-headers[_ngcontent-%COMP%]{font-size:1.4em!important;font-weight:700!important}.custom-font-data[_ngcontent-%COMP%]{font-size:1.03em!important;word-wrap:break-word;font-weight:700}.fila-seleccionada[_ngcontent-%COMP%]{background-color:#009331!important;color:#fff!important;font-weight:700!important;.nueva-especialidad {color: black !important;}}.custom-font[_ngcontent-%COMP%]{font-size:3em!important;font-weight:700!important}.custom-pointer[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:100px}.imagen-usuario[_ngcontent-%COMP%]{border-radius:100px;width:100px}.textarea[_ngcontent-%COMP%]{resize:none;height:100%}.nueva-especialidad[_ngcontent-%COMP%]{color:red;font-weight:bolder;font-size:1.03em}.columna[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center!important}"]}),t})(),q=(()=>{class t{transform(i){return Array.isArray(i)&&0!==i.length?i.sort((n,s)=>n.nombre.localeCompare(s.nombre)):i}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=e.Yjl({name:"sortByName",type:t,pure:!0}),t})();function $(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",15)(1,"app-buscador",16),e.NdJ("OnLimpiarBuscador",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.limpiarDatos())})("OnSeleccionElemento",function(s){e.CHM(i);const a=e.oxw();return e.KtG(a.obtenerUsuario(s))}),e.qZA()()}if(2&t){const i=e.oxw();e.xp6(1),e.Q6J("funcionBuscador",i.buscarPaciente)("titulo",i.tituloBuscador)("funcionPipe",i.transformarTexto)("limpiarDesdeExterior",i.limpiarAutocomplete)}}function G(t,o){1&t&&(e.TgZ(0,"div",17)(1,"span",18),e._uU(2,"Cargando..."),e.qZA(),e._UZ(3,"div",19),e.qZA())}function H(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",21),e.NdJ("click",function(){const a=e.CHM(i).$implicit,c=e.oxw(2);return e.KtG(c.seleccionEspecialidad(a))}),e.TgZ(2,"p",22),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()()}if(2&t){const i=o.$implicit,n=e.oxw(2);e.xp6(1),e.ekj("fila-seleccionada",null!=n.filaSeleccionada&&i.id===n.filaSeleccionada.id),e.xp6(2),e.Oqu(e.lcZ(4,3,i.nombre))}}function K(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,H,5,5,"div",20),e.ALo(2,"sortByName"),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i.especialidades))}}function R(t,o){1&t&&e._UZ(0,"app-loader")}const W=[{path:"",component:(()=>{class t{constructor(i,n,s,a,c){var d=this;this.usuarioService=i,this.especialidadService=n,this.swalService=s,this.toastService=a,this.horariosService=c,this.tituloBuscador="Ingrese Nombre | Apellido | Dni de paciente",this.cargando=!1,this.spinner=!1,this.spinnerEspecialistas=!1,this.spinnerTurnos=!1,this.pacienteSeleccionado=null,this.limpiarAutocomplete=!1,this.buscarPaciente=function(){var p=(0,T.Z)(function*(m){let u=yield d.usuarioService.traerListaFiltradaPor_UN_Campo("perfil",1);return u=u.filter(f=>f?.nombre?.toLowerCase().includes(m)||f?.apellido?.toLowerCase().includes(m)||f?.dni?.toString().includes(m)),u=d.ordenarPorNombreYApellidoPipe.transform(u),u});return function(m){return p.apply(this,arguments)}}(),this.transformarTexto=p=>this.usuarioPipe.transform(p)}eliminarSuscripciones(){this.eliminarSuscripcionEspecialidades(),this.eliminarSuscripcionEspecialistas(),this.eliminarSuscripcionTurnos(),this.eliminarSuscripcionUsuarios()}eliminarSuscripcionEspecialistas(){this.suscripcionEspecialistas&&this.suscripcionEspecialistas.unsubscribe()}esAdmin(){return this.usuarioActual?.perfil==h.L.administrador}eliminarSuscripcionEspecialidades(){this.suscripcionEspecialidades&&this.suscripcionEspecialidades.unsubscribe()}eliminarSuscripcionTurnos(){this.suscripcionTurnos&&this.suscripcionTurnos.unsubscribe()}eliminarSuscripcionUsuarios(){this.suscripcionUsuarios&&this.suscripcionUsuarios.unsubscribe()}ngOnDestroy(){this.eliminarSuscripciones()}ngOnInit(){this.cargando=!0,this.usuarioPipe=new x,this.ordenarPorNombreYApellidoPipe=new v,this.traerEspecialidades(),this.usuarioService.obtenerUsuarioActual().then(i=>{this.usuarioActual=i}),this.cargando=!1}seleccionEspecialista(i){this.spinnerTurnos=!0,this.eliminarSuscripcionTurnos(),this.suscripcionTurnos=this.horariosService.traerListaDeItemsFiltradoPor_TRES_CamposDe_IGUALDAD("idMedico",i.id,"idEspecialidad",this.especialidadSeleccionada.id,"ocupado",!1).subscribe(n=>{let s=new Date,a=new Date;a.setDate(s.getDate()+15);let c=n.filter(d=>{let p=new Date(1e3*d.fechaDate.seconds);return p>=s&&p<=a});this.turnos=c,this.spinnerTurnos=!1,0==this.turnos.length&&!this.cargando&&this.toastService.informacion("El especialista seleccionado NO TIENE turnos disponibles para la especialidad seleccionada.","Aviso.")})}traerEspecialidades(){this.eliminarSuscripcionTurnos(),this.spinner=!0,this.suscripcionEspecialidades=this.especialidadService.obtenerListadoDeEspecialidadesObservable().subscribe(i=>{this.especialidades=i,this.spinner=!1})}seleccionEspecialidad(i){this.esAdmin()&&null==this.pacienteSeleccionado?this.swalService.warning("Debe seleccionar un paciente para operar.","Aviso."):(this.filaSeleccionada=i,this.especialistas=null,this.turnos=null,this.spinnerEspecialistas=!0,this.especialidadSeleccionada=i,this.eliminarSuscripcionTurnos(),this.eliminarSuscripcionEspecialistas(),this.suscripcionEspecialistas=this.usuarioService.obtenerEspecialistaPorEspecialidad(i).subscribe(n=>{this.especialistas=n,0==this.especialistas.length&&this.toastService.informacion("La especialidad seleccionada NO CUENTA con especialistas por el momento.","Aviso."),this.spinnerEspecialistas=!1}))}seleccionTurno(i){let n;this.turnos=null,this.cargando=!0,i.ocupado=!0,i.estadoTurno="Solicitado",n=this.esAdmin()?this.pacienteSeleccionado:this.usuarioActual,i.paciente=n,i.idPaciente=n.id,i.nombrePaciente=n.apellido+" "+n.nombre,this.horariosService.modificarItem(i).then(s=>{setTimeout(()=>{this.swalService.exito("Turno cargado con exito!"),this.cargando=!1},1e3)})}limpiarDatos(){this.especialidadSeleccionada=null,this.especialistas=null,this.especialidades=null,this.turnos=null,this.pacienteSeleccionado=null,this.filaSeleccionada=null,this.limpiarAutocomplete=!this.limpiarAutocomplete,this.traerEspecialidades()}obtenerUsuario(i){this.pacienteSeleccionado=i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(S.i),e.Y36(C.T),e.Y36(b.J),e.Y36(E.k),e.Y36(O.p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-solicitar-turno"]],decls:22,vars:8,consts:[[1,"bg-dark"],[1,"text-center","text-light","custom-font"],[1,"d-flex","justify-content-between"],[1,"row","w-50","m-2"],["class","col border p-2 w-50 bg-dark text-light",4,"ngIf"],[1,"m-2"],[1,"btn","btn-warning","fw-bold","fs-4",3,"click"],[1,"row","w-100","p-0","m-0"],[1,"col","col-12","col-md-4"],[1,"border","p-2","w-100","bg-dark","text-light"],["class","d-flex justify-content-around",4,"ngIf","ngIfElse"],["lista",""],[3,"spinner","especialistas","OnSeleccionEspecialista"],[3,"spinner","turnos","OnSeleccionTurno"],[4,"ngIf"],[1,"col","border","p-2","w-50","bg-dark","text-light"],[3,"funcionBuscador","titulo","funcionPipe","limpiarDesdeExterior","OnLimpiarBuscador","OnSeleccionElemento"],[1,"d-flex","justify-content-around"],[1,"fs-3","fw-bold"],[1,"spinner-border","text-danger","text-center",2,"align-self","center","scale","1.2"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","custom-pointer","mx-0","border","bg-light","text-dark",3,"click"],[1,"m-2","custom-pointer"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"SOLICITUD DE TURNOS"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,$,2,4,"div",4),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return n.limpiarDatos()}),e._uU(8,"Limpiar"),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"h3"),e._uU(13,"Seleccione Especialidad"),e.qZA(),e.YNc(14,G,4,0,"div",10),e.YNc(15,K,3,3,"ng-template",null,11,e.W1O),e.qZA()(),e.TgZ(17,"div",8)(18,"app-lista-especialistas",12),e.NdJ("OnSeleccionEspecialista",function(a){return n.seleccionEspecialista(a)}),e.qZA()(),e.TgZ(19,"div",8)(20,"app-lista-turnos",13),e.NdJ("OnSeleccionTurno",function(a){return n.seleccionTurno(a)}),e.qZA()()(),e.YNc(21,R,1,0,"app-loader",14)),2&i){const s=e.MAs(16);e.xp6(5),e.Q6J("ngIf",n.esAdmin()),e.xp6(9),e.Q6J("ngIf",n.spinner)("ngIfElse",s),e.xp6(4),e.Q6J("spinner",n.spinnerEspecialistas)("especialistas",n.especialistas),e.xp6(2),e.Q6J("spinner",n.spinnerTurnos)("turnos",n.turnos),e.xp6(1),e.Q6J("ngIf",n.cargando)}},dependencies:[l.sg,l.O5,w.R,A.a,F,Q,l.rS,q],styles:[".custom-font-headers[_ngcontent-%COMP%]{font-size:1.4em!important;font-weight:700!important}.custom-pointer[_ngcontent-%COMP%]{font-size:1.03em!important;word-wrap:break-word;font-weight:700}.fila-seleccionada[_ngcontent-%COMP%]{background-color:#009331!important;color:#fff!important;font-weight:700!important;.nueva-especialidad {color: black !important;}}.custom-font[_ngcontent-%COMP%]{font-size:3em!important;font-weight:700!important}.custom-pointer[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:100px}.imagen-usuario[_ngcontent-%COMP%]{border-radius:100px;width:100px}.textarea[_ngcontent-%COMP%]{resize:none;height:100%}.nueva-especialidad[_ngcontent-%COMP%]{color:red;font-weight:bolder;font-size:1.03em}.columna[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center!important}"]}),t})()}];let X=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(W),_.Bz]}),t})();var V=r(4466);let ee=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,X,V.m]}),t})()}}]);