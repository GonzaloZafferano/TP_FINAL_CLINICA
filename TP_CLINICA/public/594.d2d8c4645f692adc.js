"use strict";(self.webpackChunkTP_CLINICA=self.webpackChunkTP_CLINICA||[]).push([[594],{9594:(Mt,me,g)=>{g.r(me),g.d(me,{RegistroModule:()=>ti});var Z=g(6895),M=g(6378),K=g(3474),e=g(4650),te=g(7556),W=g(1209);function Ue(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",9)(2,"h3",10),e._uU(3," Seleccione el tipo de usuario que desea registrar. "),e.qZA(),e._UZ(4,"img",11),e.qZA(),e.BQk())}let ke=(()=>{class t{constructor(r,o,i){this.authService=r,this.usuarioService=o,this.router=i,this.ocultarBtnCuentaUsuario=!1,this.ocultarBtnCuentaAdmin=!1,this.ocultarBtnCuentaEspecialista=!1,this.ocultarLogo=!1}ngOnInit(){let r=this.router.url;this.ocultarLogo="/registro"!=r&&"/usuarios/registro"!=r,this.ocultarBtnCuentaEspecialista=r.includes("registro/especialista"),this.ocultarBtnCuentaUsuario=r.includes("registro/usuario"),this.ocultarBtnCuentaAdmin=r.includes("registro/administrador")}esAdministrador(){let r=this.verificarEstadoDeUsuario();return null!=r&&r.perfil==K.L.administrador}usuarioEstaLogueado(){return this.usuarioService.getUsuarioEstaLogueado}verificarEstadoDeUsuario(){return this.usuarioService.getUsuarioActualBasico}cuenta(r){1==r?(this.ocultarBtnCuentaAdmin=!0,this.ocultarBtnCuentaUsuario=!1,this.ocultarBtnCuentaEspecialista=!1):2==r?(this.ocultarBtnCuentaAdmin=!1,this.ocultarBtnCuentaUsuario=!1,this.ocultarBtnCuentaEspecialista=!0):3==r&&(this.ocultarBtnCuentaAdmin=!1,this.ocultarBtnCuentaUsuario=!0,this.ocultarBtnCuentaEspecialista=!1),this.ocultarLogo=!0}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(te.e),e.Y36(W.i),e.Y36(M.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registro"]],decls:11,vars:5,consts:[["routerLink","",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2",3,"hidden"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["routerLink","usuario",1,"btn","btn-primary","botones","fs-4","fw-bold","p-2","m-2",3,"hidden","click"],["src","../assets/fotosPerfil/usuarios.png","width","50px",1,"img-foto"],["routerLink","especialista",1,"btn","btn-primary","botones","fs-4","fw-bold","p-2","m-2",3,"hidden","click"],["src","../assets/fotosPerfil/especialistas.jpg","width","50px",1,"img-foto"],["routerLink","administrador",1,"btn","btn-primary","botones","fs-4","fw-bold","p-2","m-2",3,"hidden","click"],["src","../assets/fotosPerfil/administradores.png","width","50px",1,"img-foto"],[1,"text-center"],[1,"fw-bold","fs-2","text-dark"],["src","assets/logo/logo192x192.png","alt","imagen-usuario",1,"card-img-top","w-25"]],template:function(r,o){1&r&&(e.TgZ(0,"button",0),e._uU(1,"Volver a Bienvenido"),e.qZA(),e.YNc(2,Ue,5,0,"ng-container",1),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return o.cuenta(3)}),e._UZ(5,"img",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.cuenta(2)}),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"button",7),e.NdJ("click",function(){return o.cuenta(1)}),e._UZ(9,"img",8),e.qZA()(),e._UZ(10,"router-outlet")),2&r&&(e.Q6J("hidden",o.usuarioEstaLogueado()),e.xp6(2),e.Q6J("ngIf",!o.ocultarLogo),e.xp6(2),e.Q6J("hidden",o.ocultarBtnCuentaUsuario),e.xp6(2),e.Q6J("hidden",o.ocultarBtnCuentaEspecialista),e.xp6(2),e.Q6J("hidden",o.ocultarBtnCuentaAdmin||!o.esAdministrador()))},dependencies:[Z.O5,M.lC,M.rH],styles:[".botones[_ngcontent-%COMP%]{background:rgb(76,204,62);border-radius:50%;border:none}.img-foto[_ngcontent-%COMP%]{border-radius:50%;height:150px;width:150px}"]}),t})();var V=g(5861),d=g(4006),se=g(4128),v=g(4500);class m{constructor(){this.id="",this.correo="",this.nombre="",this.apellido="",this.dni=0,this.imagen1="",this.imagen2="",this.edad=0,this.obraSocial=0,this.habilitado=v.j.espera,this.correoRegistrado=!1,this.perfil=K.L.paciente,this.fechaRegistro=new Date}}class f{constructor(){this.validando=!1}}var u=g(5708),p=g(6069),b=g(9724),C=g(7272),O=g(4482),Y=g(5403),P=g(5032),le=g(9770),Se=g(9751),$e=g(9646),ge=g(8996),Dt=g(4986),jt=g(4004),Ge=g(3900),ce=g(4976),_e=g(2011),Bt=g(3942),ve=g(6881),D=g(2090),He=g(4859);const ze="firebasestorage.googleapis.com",Ke="storageBucket";class T extends D.ZR{constructor(n,r,o=0){super(Ie(n),`Firebase Storage: ${r} (${Ie(n)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,T.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return Ie(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var y=(()=>{return(t=y||(y={})).UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",y;var t})();function Ie(t){return"storage/"+t}function Ne(){return new T(y.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xe(){return new T(y.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function We(){return new T(y.CANCELED,"User canceled the upload/download.")}function et(){return new T(y.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function re(t){return new T(y.INVALID_ARGUMENT,t)}function tt(){return new T(y.APP_DELETED,"The Firebase app was deleted.")}function rt(t){return new T(y.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ue(t,n){return new T(y.INVALID_FORMAT,"String does not match format '"+t+"': "+n)}function de(t){throw new T(y.INTERNAL_ERROR,"Internal error: "+t)}class k{constructor(n,r){this.bucket=n,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,r){let o;try{o=k.makeFromUrl(n,r)}catch{return new k(n,"")}if(""===o.path)return o;throw function Xt(t){return new T(y.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(n)}static makeFromUrl(n,r){let o=null;const i="([A-Za-z0-9.\\-_]+)",l=new RegExp("^gs://"+i+"(/(.*))?$","i");function h(U){U.path_=decodeURIComponent(U.path)}const E=r.replace(/[.]/g,"\\."),S=[{regex:l,indices:{bucket:1,path:3},postModify:function a(U){"/"===U.path.charAt(U.path.length-1)&&(U.path_=U.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:h},{regex:new RegExp(`^https?://${r===ze?"(?:storage.googleapis.com|storage.cloud.google.com)":r}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:h}];for(let U=0;U<S.length;U++){const ie=S[U],ae=ie.regex.exec(n);if(ae){let pe=ae[ie.indices.path];pe||(pe=""),o=new k(ae[ie.indices.bucket],pe),ie.postModify(o);break}}if(null==o)throw function Kt(t){return new T(y.INVALID_URL,"Invalid URL '"+t+"'.")}(n);return o}}class nr{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function be(t){return"string"==typeof t||t instanceof String}function nt(t){return Ze()&&t instanceof Blob}function Ze(){return typeof Blob<"u"&&!(0,D.UG)()}function Oe(t,n,r,o){if(o<n)throw re(`Invalid value for '${t}'. Expected ${n} or greater.`);if(o>r)throw re(`Invalid value for '${t}'. Expected ${r} or less.`)}function $(t,n,r){let o=n;return null==r&&(o=`https://${n}`),`${r}://${o}/v0${t}`}function ot(t){const n=encodeURIComponent;let r="?";for(const o in t)t.hasOwnProperty(o)&&(r=r+(n(o)+"=")+n(t[o])+"&");return r=r.slice(0,-1),r}var X=(()=>{return(t=X||(X={}))[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",X;var t})();function it(t,n){const r=t>=500&&t<600,i=-1!==[408,429].indexOf(t),a=-1!==n.indexOf(t);return r||i||a}class cr{constructor(n,r,o,i,a,s,l,c,h,_,E,x=!0){this.url_=n,this.method_=r,this.headers_=o,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=E,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,A)=>{this.resolve_=R,this.reject_=A,this.start_()})}start_(){const r=(o,i)=>{const a=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());!function ar(t){return void 0!==t}(c)?a():a(c)}catch(c){s(c)}else if(null!==l){const c=Ne();c.serverResponse=l.getErrorText(),s(this.errorCallback_?this.errorCallback_(l,c):c)}else s(i.canceled?this.appDelete_?tt():We():Xe())};this.canceled_?r(0,new ye(!1,null,!0)):this.backoffId_=function or(t,n,r){let o=1,i=null,a=null,s=!1,l=0;function c(){return 2===l}let h=!1;function _(...w){h||(h=!0,n.apply(null,w))}function E(w){i=setTimeout(()=>{i=null,t(R,c())},w)}function x(){a&&clearTimeout(a)}function R(w,...H){if(h)return void x();if(w)return x(),void _.call(null,w,...H);if(c()||s)return x(),void _.call(null,w,...H);let S;o<64&&(o*=2),1===l?(l=2,S=0):S=1e3*(o+Math.random()),E(S)}let A=!1;function L(w){A||(A=!0,x(),!h&&(null!==i?(w||(l=2),clearTimeout(i),E(0)):w||(l=1)))}return E(0),a=setTimeout(()=>{s=!0,L(!0)},r),L}((o,i)=>{if(i)return void o(!1,new ye(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const s=l=>{null!==this.progressCallback_&&this.progressCallback_(l.loaded,l.lengthComputable?l.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const l=a.getErrorCode()===X.NO_ERROR,c=a.getStatus();if(!l||it(c,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===X.ABORT;return void o(!1,new ye(!1,null,_))}const h=-1!==this.successCodes_.indexOf(c);o(!0,new ye(h,a))})},r,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function ir(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ye{constructor(n,r,o){this.wasSuccessCode=n,this.connection=r,this.canceled=!!o}}function gr(...t){const n=function mr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){const r=new n;for(let o=0;o<t.length;o++)r.append(t[o]);return r.getBlob()}if(Ze())return new Blob(t);throw new T(y.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const F={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pe{constructor(n,r){this.data=n,this.contentType=r||null}}function Fe(t,n){switch(t){case F.RAW:return new Pe(at(n));case F.BASE64:case F.BASE64URL:return new Pe(st(t,n));case F.DATA_URL:return new Pe(function yr(t){const n=new lt(t);return n.base64?st(F.BASE64,n.rest):function br(t){let n;try{n=decodeURIComponent(t)}catch{throw ue(F.DATA_URL,"Malformed data URL.")}return at(n)}(n.rest)}(n),function xr(t){return new lt(t).contentType}(n))}throw Ne()}function at(t){const n=[];for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<=127?n.push(o):o<=2047?n.push(192|o>>6,128|63&o):55296==(64512&o)?r<t.length-1&&56320==(64512&t.charCodeAt(r+1))?(o=65536|(1023&o)<<10|1023&t.charCodeAt(++r),n.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)):n.push(239,191,189):56320==(64512&o)?n.push(239,191,189):n.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(n)}function st(t,n){switch(t){case F.BASE64:{const i=-1!==n.indexOf("-"),a=-1!==n.indexOf("_");if(i||a)throw ue(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case F.BASE64URL:{const i=-1!==n.indexOf("+"),a=-1!==n.indexOf("/");if(i||a)throw ue(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=function vr(t){if(typeof atob>"u")throw function rr(t){return new T(y.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(n)}catch(i){throw i.message.includes("polyfill")?i:ue(t,"Invalid character found")}const o=new Uint8Array(r.length);for(let i=0;i<r.length;i++)o[i]=r.charCodeAt(i);return o}class lt{constructor(n){this.base64=!1,this.contentType=null;const r=n.match(/^data:([^,]+)?,/);if(null===r)throw ue(F.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=r[1]||null;null!=o&&(this.base64=function Rr(t,n){return t.length>=n.length&&t.substring(t.length-n.length)===n}(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=n.substring(n.indexOf(",")+1)}}class B{constructor(n,r){let o=0,i="";nt(n)?(this.data_=n,o=n.size,i=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),o=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),o=n.length),this.size_=o,this.type_=i}size(){return this.size_}type(){return this.type_}slice(n,r){if(nt(this.data_)){const i=function _r(t,n,r){return t.webkitSlice?t.webkitSlice(n,r):t.mozSlice?t.mozSlice(n,r):t.slice?t.slice(n,r):null}(this.data_,n,r);return null===i?null:new B(i)}{const o=new Uint8Array(this.data_.buffer,n,r-n);return new B(o,!0)}}static getBlob(...n){if(Ze()){const r=n.map(o=>o instanceof B?o.data_:o);return new B(gr.apply(null,r))}{const r=n.map(s=>be(s)?Fe(F.RAW,s).data:s.data_);let o=0;r.forEach(s=>{o+=s.byteLength});const i=new Uint8Array(o);let a=0;return r.forEach(s=>{for(let l=0;l<s.length;l++)i[a++]=s[l]}),new B(i,!0)}}uploadData(){return this.data_}}function Le(t){let n;try{n=JSON.parse(t)}catch{return null}return function lr(t){return"object"==typeof t&&!Array.isArray(t)}(n)?n:null}function ct(t){const n=t.lastIndexOf("/",t.length-2);return-1===n?t:t.slice(n+1)}function Ar(t,n){return n}class I{constructor(n,r,o,i){this.server=n,this.local=r||n,this.writable=!!o,this.xform=i||Ar}}let xe=null;function he(){if(xe)return xe;const t=[];t.push(new I("bucket")),t.push(new I("generation")),t.push(new I("metageneration")),t.push(new I("name","fullPath",!0));const r=new I("name");r.xform=function n(a,s){return function wr(t){return!be(t)||t.length<2?t:ct(t)}(s)},t.push(r);const i=new I("size");return i.xform=function o(a,s){return void 0!==s?Number(s):s},t.push(i),t.push(new I("timeCreated")),t.push(new I("updated")),t.push(new I("md5Hash",null,!0)),t.push(new I("cacheControl",null,!0)),t.push(new I("contentDisposition",null,!0)),t.push(new I("contentEncoding",null,!0)),t.push(new I("contentLanguage",null,!0)),t.push(new I("contentType",null,!0)),t.push(new I("metadata","customMetadata",!0)),xe=t,xe}function ut(t,n,r){const o=Le(n);return null===o?null:function Ur(t,n,r){const o={type:"file"},i=r.length;for(let a=0;a<i;a++){const s=r[a];o[s.local]=s.xform(o,n[s.server])}return function Cr(t,n){Object.defineProperty(t,"ref",{get:function r(){const a=new k(t.bucket,t.fullPath);return n._makeStorageReference(a)}})}(o,t),o}(t,o,r)}function Me(t,n){const r={},o=n.length;for(let i=0;i<o;i++){const a=n[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}const dt="prefixes",ht="items";class Q{constructor(n,r,o,i){this.url=n,this.method=r,this.handler=o,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function J(t){if(!t)throw Ne()}function Re(t,n){return function r(o,i){const a=ut(t,i,n);return J(null!==a),a}}function ne(t){return function n(r,o){let i;return i=401===r.getStatus()?r.getErrorText().includes("Firebase App Check token is invalid")?function Ht(){return new T(y.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Gt(){return new T(y.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===r.getStatus()?function $t(t){return new T(y.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===r.getStatus()?function zt(t){return new T(y.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):o,i.status=r.getStatus(),i.serverResponse=o.serverResponse,i}}function fe(t){const n=ne(t);return function r(o,i){let a=n(o,i);return 404===o.getStatus()&&(a=function Yt(t){return new T(y.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),a.serverResponse=i.serverResponse,a}}function ft(t,n,r){const i=$(n.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,l=new Q(i,"GET",Re(t,r),s);return l.errorHandler=fe(n),l}function Or(t,n,r,o,i){const a={};a.prefix=n.isRoot?"":n.path+"/",r&&r.length>0&&(a.delimiter=r),o&&(a.pageToken=o),i&&(a.maxResults=i);const l=$(n.bucketOnlyServerUrl(),t.host,t._protocol),h=t.maxOperationRetryTime,_=new Q(l,"GET",function Nr(t,n){return function r(o,i){const a=function Ir(t,n,r){const o=Le(r);return null===o?null:function Sr(t,n,r){const o={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[dt])for(const i of r[dt]){const a=i.replace(/\/$/,""),s=t._makeStorageReference(new k(n,a));o.prefixes.push(s)}if(r[ht])for(const i of r[ht]){const a=t._makeStorageReference(new k(n,i.name));o.items.push(a)}return o}(t,n,o)}(t,n,i);return J(null!==a),a}}(t,n.bucket),h);return _.urlParams=a,_.errorHandler=ne(n),_}function mt(t,n,r){const o=Object.assign({},r);return o.fullPath=t.path,o.size=n.size(),o.contentType||(o.contentType=function Mr(t,n){return t&&t.contentType||n&&n.type()||"application/octet-stream"}(null,n)),o}class Te{constructor(n,r,o,i){this.current=n,this.total=r,this.finalized=!!o,this.metadata=i||null}}function De(t,n){let r=null;try{r=t.getResponseHeader("X-Goog-Upload-Status")}catch{J(!1)}return J(!!r&&-1!==(n||["active"]).indexOf(r)),r}const Br={STATE_CHANGED:"state_changed"},N={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qe(t){switch(t){case"running":case"pausing":case"canceling":return N.RUNNING;case"paused":return N.PAUSED;case"success":return N.SUCCESS;case"canceled":return N.CANCELED;default:return N.ERROR}}class Qr{constructor(n,r,o){if(function sr(t){return"function"==typeof t}(n)||null!=r||null!=o)this.next=n,this.error=r??void 0,this.complete=o??void 0;else{const a=n;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function oe(t){return(...n)=>{Promise.resolve().then(()=>t(...n))}}let vt=null;class Jr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=X.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=X.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=X.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,r,o,i){if(this.sent_)throw de("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,n,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw de("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw de("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw de("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw de("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class Vr extends Jr{initXhr(){this.xhr_.responseType="text"}}function q(){return vt?vt():new Vr}class bt{constructor(n,r,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=o,this._mappings=he(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(y.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(it(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Xe()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(y.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const n=this._transferred;return r=>this._updateProgress(n+r)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,o])=>{switch(this._state){case"running":n(r,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,r)=>{const o=function Dr(t,n,r,o,i){const a=n.bucketOnlyServerUrl(),s=mt(n,o,i),l={name:s.fullPath},c=$(a,t.host,t._protocol),_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},E=Me(s,r),A=new Q(c,"POST",function R(L){let w;De(L);try{w=L.getResponseHeader("X-Goog-Upload-URL")}catch{J(!1)}return J(be(w)),w},t.maxUploadRetryTime);return A.urlParams=l,A.headers=_,A.body=E,A.errorHandler=ne(n),A}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(o,q,n,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((r,o)=>{const i=function qr(t,n,r,o){const c=new Q(r,"POST",function a(h){const _=De(h,["active","final"]);let E=null;try{E=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{J(!1)}E||J(!1);const x=Number(E);return J(!isNaN(x)),new Te(x,o.size(),"final"===_)},t.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=ne(n),c}(this._ref.storage,this._ref._location,n,this._blob),a=this._ref.storage._makeRequest(i,q,r,o);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,r=new Te(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((i,a)=>{let s;try{s=function jr(t,n,r,o,i,a,s,l){const c=new Te(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=o.size()),o.size()!==c.total)throw function er(){return new T(y.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const h=c.total-c.current;let _=h;i>0&&(_=Math.min(_,i));const E=c.current;let R="";R=0===_?"finalize":h===_?"upload, finalize":"upload";const A={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${c.current}`},L=o.slice(E,E+_);if(null===L)throw et();const S=new Q(r,"POST",function w(U,ie){const ae=De(U,["active","final"]),Ve=c.current+_,pe=o.size();let Ye;return Ye="final"===ae?Re(n,a)(U,ie):null,new Te(Ve,pe,"final"===ae,Ye)},n.maxUploadRetryTime);return S.headers=A,S.body=L.uploadData(),S.progressCallback=l||null,S.errorHandler=ne(t),S}(this._ref._location,this._ref.storage,o,this._blob,n,this._mappings,r,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const l=this._ref.storage._makeRequest(s,q,i,a,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,r)=>{const o=ft(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(o,q,n,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,r)=>{const o=function gt(t,n,r,o,i){const a=n.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},c=function l(){let S="";for(let U=0;U<2;U++)S+=Math.random().toString().slice(2);return S}();s["Content-Type"]="multipart/related; boundary="+c;const h=mt(n,o,i),_=Me(h,r),R=B.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_+"\r\n--"+c+"\r\nContent-Type: "+h.contentType+"\r\n\r\n",o,"\r\n--"+c+"--");if(null===R)throw et();const A={name:h.fullPath},L=$(a,t.host,t._protocol),H=t.maxUploadRetryTime,z=new Q(L,"POST",Re(t,r),H);return z.urlParams=A,z.headers=s,z.body=R.uploadData(),z.errorHandler=ne(n),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(o,q,n,r);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const r=this._transferred;this._transferred=n,this._transferred!==r&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r="paused"===this._state;this._state=n,r&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=n,this._notifyObservers();break;case"canceled":this._error=We(),this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=qe(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,r,o,i){const a=new Qr(r||void 0,o||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(n,r){return this._promise.then(n,r)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const r=this._observers.indexOf(n);-1!==r&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(qe(this._state)){case N.SUCCESS:oe(this._resolve.bind(null,this.snapshot))();break;case N.CANCELED:case N.ERROR:oe(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(qe(this._state)){case N.RUNNING:case N.PAUSED:n.next&&oe(n.next.bind(n,this.snapshot))();break;case N.SUCCESS:n.complete&&oe(n.complete.bind(n))();break;default:n.error&&oe(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class ee{constructor(n,r){this._service=n,this._location=r instanceof k?r:k.makeFromUrl(r,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,r){return new ee(n,r)}get root(){const n=new k(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ct(this._location.path)}get storage(){return this._service}get parent(){const n=function Tr(t){if(0===t.length)return null;const n=t.lastIndexOf("/");return-1===n?"":t.slice(0,n)}(this._location.path);if(null===n)return null;const r=new k(this._location.bucket,n);return new ee(this._service,r)}_throwIfRoot(n){if(""===this._location.path)throw rt(n)}}function xt(t,n,r){return je.apply(this,arguments)}function je(){return(je=(0,V.Z)(function*(t,n,r){const i=yield Rt(t,{pageToken:r});n.prefixes.push(...i.prefixes),n.items.push(...i.items),null!=i.nextPageToken&&(yield xt(t,n,i.nextPageToken))})).apply(this,arguments)}function Rt(t,n){null!=n&&"number"==typeof n.maxResults&&Oe("options.maxResults",1,1e3,n.maxResults);const r=n||{},o=Or(t.storage,t._location,"/",r.pageToken,r.maxResults);return t.storage.makeRequestWithTokens(o,q)}function nn(t){t._throwIfRoot("getDownloadURL");const n=function Pr(t,n,r){const i=$(n.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,l=new Q(i,"GET",function Zr(t,n){return function r(o,i){const a=ut(t,i,n);return J(null!==a),function kr(t,n,r,o){const i=Le(n);if(null===i||!be(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const s=encodeURIComponent;return a.split(",").map(h=>{const E=t.fullPath;return $("/b/"+s(t.bucket)+"/o/"+s(E),r,o)+ot({alt:"media",token:h})})[0]}(a,i,t.host,t._protocol)}}(t,r),s);return l.errorHandler=fe(n),l}(t.storage,t._location,he());return t.storage.makeRequestWithTokens(n,q).then(r=>{if(null===r)throw function tr(){return new T(y.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return r})}function Tt(t,n){const r=function Er(t,n){const r=n.split("/").filter(o=>o.length>0).join("/");return 0===t.length?r:t+"/"+r}(t._location.path,n),o=new k(t._location.bucket,r);return new ee(t.storage,o)}function Et(t,n){if(t instanceof Be){const r=t;if(null==r._bucket)throw function Wt(){return new T(y.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ke+"' property when initializing the app?")}();const o=new ee(r,r._bucket);return null!=n?Et(o,n):o}return void 0!==n?Tt(t,n):t}function ln(t,n){if(n&&function an(t){return/^[A-Za-z]+:\/\//.test(t)}(n)){if(t instanceof Be)return function sn(t,n){return new ee(t,n)}(t,n);throw re("To use ref(service, url), the first argument must be a Storage instance.")}return Et(t,n)}function At(t,n){const r=n?.[Ke];return null==r?null:k.makeFromBucketSpec(r,t)}class Be{constructor(n,r,o,i,a){this.app=n,this._authProvider=r,this._appCheckProvider=o,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ze,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?k.makeFromBucketSpec(i,this._host):At(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?k.makeFromBucketSpec(this._url,n):At(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){Oe("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){Oe("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,V.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const r=n._authProvider.getImmediate({optional:!0});if(r){const o=yield r.getToken();if(null!==o)return o.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,V.Z)(function*(){const r=n._appCheckProvider.getImmediate({optional:!0});return r?(yield r.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new ee(this,n)}_makeRequest(n,r,o,i,a=!0){if(this._deleted)return new nr(tt());{const s=function pr(t,n,r,o,i,a,s=!0){const l=ot(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return function hr(t,n){n&&(t["X-Firebase-GMPID"]=n)}(h,n),function ur(t,n){null!==n&&n.length>0&&(t.Authorization="Firebase "+n)}(h,r),function dr(t,n){t["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}(h,a),function fr(t,n){null!==n&&(t["X-Firebase-AppCheck"]=n)}(h,o),new cr(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}(n,this._appId,o,i,r,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(n,r){var o=this;return(0,V.Z)(function*(){const[i,a]=yield Promise.all([o._getAuthToken(),o._getAppCheckToken()]);return o._makeRequest(n,r,i,a).getPromise()})()}}const wt="@firebase/storage";function kt(t,n){return ln(t=(0,D.m9)(t),n)}function vn(t,{instanceIdentifier:n}){const r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Be(r,o,i,n,ve.SDK_VERSION)}!function bn(){(0,ve._registerComponent)(new He.wA("storage",vn,"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(wt,"0.11.2",""),(0,ve.registerVersion)(wt,"0.11.2","esm2017")}();class Ee{constructor(n,r,o){this._delegate=n,this.task=r,this.ref=o}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class It{constructor(n,r){this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ee(this._delegate.snapshot,this,this._ref)}then(n,r){return this._delegate.then(o=>{if(n)return n(new Ee(o,this,this._ref))},r)}on(n,r,o,i){let a;return r&&(a="function"==typeof r?s=>r(new Ee(s,this,this._ref)):{next:r.next?s=>r.next(new Ee(s,this,this._ref)):void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(n,a,o||void 0,i||void 0)}}class Nt{constructor(n,r){this._delegate=n,this._service=r}get prefixes(){return this._delegate.prefixes.map(n=>new G(n,this._service))}get items(){return this._delegate.items.map(n=>new G(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class G{constructor(n,r){this._delegate=n,this.storage=r}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const r=function _n(t,n){return Tt(t,n)}(this._delegate,n);return new G(r,this.storage)}get root(){return new G(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new G(n,this.storage)}put(n,r){return this._throwIfRoot("put"),new It(function un(t,n,r){return function Xr(t,n,r){return t._throwIfRoot("uploadBytesResumable"),new bt(t,new B(n),r)}(t=(0,D.m9)(t),n,r)}(this._delegate,n,r),this)}putString(n,r=F.RAW,o){this._throwIfRoot("putString");const i=Fe(r,n),a=Object.assign({},o);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new It(new bt(this._delegate,new B(i.data,!0),a),this)}listAll(){return function pn(t){return function en(t){const n={prefixes:[],items:[]};return xt(t,n).then(()=>n)}(t=(0,D.m9)(t))}(this._delegate).then(n=>new Nt(n,this.storage))}list(n){return function fn(t,n){return Rt(t=(0,D.m9)(t),n)}(this._delegate,n||void 0).then(r=>new Nt(r,this.storage))}getMetadata(){return function dn(t){return function tn(t){t._throwIfRoot("getMetadata");const n=ft(t.storage,t._location,he());return t.storage.makeRequestWithTokens(n,q)}(t=(0,D.m9)(t))}(this._delegate)}updateMetadata(n){return function hn(t,n){return function rn(t,n){t._throwIfRoot("updateMetadata");const r=function Fr(t,n,r,o){const a=$(n.fullServerUrl(),t.host,t._protocol),l=Me(r,o),h=t.maxOperationRetryTime,_=new Q(a,"PATCH",Re(t,o),h);return _.headers={"Content-Type":"application/json; charset=utf-8"},_.body=l,_.errorHandler=fe(n),_}(t.storage,t._location,n,he());return t.storage.makeRequestWithTokens(r,q)}(t=(0,D.m9)(t),n)}(this._delegate,n)}getDownloadURL(){return function mn(t){return nn(t=(0,D.m9)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function gn(t){return function on(t){t._throwIfRoot("deleteObject");const n=function Lr(t,n){const o=$(n.fullServerUrl(),t.host,t._protocol),l=new Q(o,"DELETE",function s(c,h){},t.maxOperationRetryTime);return l.successCodes=[200,204],l.errorHandler=fe(n),l}(t.storage,t._location);return t.storage.makeRequestWithTokens(n,q)}(t=(0,D.m9)(t))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw rt(n)}}class Zt{constructor(n,r){this.app=n,this._delegate=r}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(Ot(n))throw re("ref() expected a child path but got a URL, use refFromURL instead.");return new G(kt(this._delegate,n),this)}refFromURL(n){if(!Ot(n))throw re("refFromURL() expected a full URL but got a child path, use ref() instead.");try{k.makeFromUrl(n,this._delegate.host)}catch{throw re("refFromUrl() expected a valid full URL but got an invalid one.")}return new G(kt(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,r,o={}){!function St(t,n,r,o={}){!function cn(t,n,r,o={}){t.host=`${n}:${r}`,t._protocol="http";const{mockUserToken:i}=o;i&&(t._overrideAuthToken="string"==typeof i?i:(0,D.Sg)(i,t.app.options.projectId))}(t,n,r,o)}(this._delegate,n,r,o)}}function Ot(t){return/^[A-Za-z]+:\/\//.test(t)}function Tn(t,{instanceIdentifier:n}){const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("storage").getImmediate({identifier:n});return new Zt(r,o)}!function En(t){const n={TaskState:N,TaskEvent:Br,StringFormat:F,Storage:Zt,Reference:G};t.INTERNAL.registerComponent(new He.wA("storage-compat",Tn,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.2")}(Bt.Z);var An=g(2313);function Pt(t){const n=function wn(t){return new Se.y(n=>{const r=s=>n.next(s);r(t.snapshot);const a=t.on("state_changed",r);return t.then(s=>{r(s),n.complete()},s=>{r(t.snapshot),(s=>{n.error(s)})(s)}),function(){a()}}).pipe(function qt(t,n=Dt.z){return(0,O.e)((r,o)=>{let i=null,a=null,s=null;const l=()=>{if(i){i.unsubscribe(),i=null;const h=a;a=null,o.next(h)}};function c(){const h=s+t,_=n.now();if(_<h)return i=this.schedule(void 0,h-_),void o.add(i);l()}r.subscribe((0,Y.x)(o,h=>{a=h,s=n.now(),i||(i=n.schedule(c,t),o.add(i))},()=>{l(),o.complete()},void 0,()=>{a=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,jt.U)(r=>r.bytesTransferred/r.totalBytes*100))}}function Ae(t){return{getDownloadURL:()=>(0,$e.of)(void 0).pipe(ce.fc,(0,Ge.w)(()=>t.getDownloadURL()),ce.iC),getMetadata:()=>(0,$e.of)(void 0).pipe(ce.fc,(0,Ge.w)(()=>t.getMetadata()),ce.iC),delete:()=>(0,ge.D)(t.delete()),child:n=>Ae(t.child(n)),updateMetadata:n=>(0,ge.D)(t.updateMetadata(n)),put:(n,r)=>Pt(t.put(n,r)),putString:(n,r,o)=>Pt(t.putString(n,r,o)),list:n=>(0,ge.D)(t.list(n)),listAll:()=>(0,ge.D)(t.listAll())}}g(9260);const Cn=new e.OlP("angularfire2.storageBucket"),Un=new e.OlP("angularfire2.storage.maxUploadRetryTime"),kn=new e.OlP("angularfire2.storage.maxOperationRetryTime"),Sn=new e.OlP("angularfire2.storage.use-emulator");let In=(()=>{class t{constructor(r,o,i,a,s,l,c,h,_,E){const x=(0,_e.on)(r,s,o);this.storage=(0,_e.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const R=s.runOutsideAngular(()=>x.storage(i||void 0)),A=_;return A&&R.useEmulator(...A),c&&R.setMaxUploadRetryTime(c),h&&R.setMaxOperationRetryTime(h),R},[c,h])}ref(r){return Ae(this.storage.ref(r))}refFromURL(r){return Ae(this.storage.refFromURL(r))}upload(r,o,i){return Ae(this.storage.ref(r)).put(o,i)}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(_e.Dh),e.LFG(_e.xv,8),e.LFG(Cn,8),e.LFG(e.Lbi),e.LFG(e.R0b),e.LFG(ce.HU),e.LFG(Un,8),e.LFG(kn,8),e.LFG(Sn,8),e.LFG(An.nm,8))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();var we=g(4465);let Qe=(()=>{class t{constructor(r,o){this.storage=r,this.toast=o}guardarArchivo(r,o){const i=this.storage.ref(o),a=this.storage.upload(o,r);return(0,C.z)(a.snapshotChanges().pipe(function j(){return(0,O.e)((t,n)=>{t.subscribe((0,Y.x)(n,P.Z))})}()),(0,le.P)(()=>i.getDownloadURL()))}guardarArchivoV2(r,o){var i=this;return(0,V.Z)(function*(){try{const a=i.storage.ref(o);return yield a.put(r),a.getDownloadURL()}catch(a){return i.toast.error(a.message),null}})()}obtenerArchivoPorURL(r){return this.storage.storage.refFromURL(r)}eliminarArchivoPorRutaAbsoluta(r){return this.storage.ref(r).delete()}eliminarArchivoPorURL(r){const o=this.obtenerArchivoPorURL(r);return this.storage.ref(o.fullPath).delete()}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(In),e.LFG(we.k))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Je=g(605),Ce=g(8242);function Nn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.nombre?null:o.nombre.getError(r).mensaje," ")}}function Zn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Nn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.nombre?null:r.nombre.errors))}}function On(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.apellido?null:o.apellido.getError(r).mensaje," ")}}function Pn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,On,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.apellido?null:r.apellido.errors))}}function Fn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.edad?null:o.edad.getError(r).mensaje," ")}}function Ln(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Fn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.edad?null:r.edad.errors))}}function Mn(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",35)(2,"span",36),e._uU(3,"Validando..."),e.qZA(),e._UZ(4,"div",37),e.qZA(),e.BQk())}function Dn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.dni?null:o.dni.getError(r).mensaje," ")}}function qn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Dn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.dni?null:r.dni.errors))}}function jn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.obraSocial?null:o.obraSocial.getError(r).mensaje," ")}}function Bn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,jn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.obraSocial?null:r.obraSocial.errors))}}function Qn(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",35)(2,"span",36),e._uU(3,"Validando..."),e.qZA(),e._UZ(4,"div",37),e.qZA(),e.BQk())}function Jn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.correo?null:o.correo.getError(r).mensaje," ")}}function Vn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Jn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.correo?null:r.correo.errors))}}function Yn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.clave?null:o.clave.getError(r).mensaje," ")}}function $n(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Yn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.clave?null:r.clave.errors))}}function Gn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.confirmarClave?null:o.confirmarClave.getError(r).mensaje," ")}}function Hn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Gn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.confirmarClave?null:r.confirmarClave.errors))}}function zn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.imagen1?null:o.imagen1.getError(r).mensaje," ")}}function Kn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,zn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.imagen1?null:r.imagen1.errors))}}function Xn(t,n){if(1&t&&(e.TgZ(0,"small",34),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.imagen2?null:o.imagen2.getError(r).mensaje," ")}}function Wn(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Xn,2,1,"small",33),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.imagen2?null:r.imagen2.errors))}}function eo(t,n){1&t&&e._UZ(0,"app-loader")}let to=(()=>{class t{get nombre(){return this.form?.get("nombre")}set nombre(r){this.form?.get("nombre")?.patchValue(r)}get apellido(){return this.form?.get("apellido")}set apellido(r){this.form?.get("apellido")?.patchValue(r)}get edad(){return this.form?.get("edad")}set edad(r){this.form?.get("edad")?.patchValue(r)}get dni(){return this.form?.get("dni")}set dni(r){this.form?.get("dni")?.patchValue(r)}get obraSocial(){return this.form?.get("obraSocial")}set obraSocial(r){this.form?.get("obraSocial")?.patchValue(r)}get correo(){return this.form?.get("correo")}set correo(r){this.form?.get("correo")?.patchValue(r)}get clave(){return this.form?.get("clave")}set clave(r){this.form?.get("clave")?.patchValue(r)}get confirmarClave(){return this.form?.get("confirmarClave")}set confirmarClave(r){this.form?.get("confirmarClave")?.patchValue(r)}get imagen1(){return this.form?.get("imagen1")}set imagen1(r){this.form?.get("imagen1")?.patchValue(r)}get imagen2(){return this.form?.get("imagen2")}set imagen2(r){this.form?.get("imagen2")?.patchValue(r)}constructor(r,o,i,a,s,l,c,h){this.router=r,this.authService=o,this.formato=i,this.usuarioService=a,this.formBuilder=s,this.swalService=l,this.firestorageService=c,this.toastService=h,this.cargando=!1,this.archivos=[],this.siteKey="6LfKPZEmAAAAAGDBK0uVurfxhxuQGydWQI2jjlBe",this.validarCorreo=new f,this.validarDni=new f}ngOnInit(){this.aFormGroup=this.formBuilder.group({recaptcha:["",d.kI.required]}),this.form=new d.cw({nombre:new d.NI("",{validators:[(0,u.$k)(3,30,null,!0,!0)]}),apellido:new d.NI("",{validators:[(0,u.$k)(3,30,null,!0,!0)]}),edad:new d.NI("",{validators:[(0,u.Ms)(18,99)]}),dni:new d.NI("",{validators:[(0,u.Ms)(1e7,99999999)],asyncValidators:(0,u.j8)(this.usuarioService,this.validarDni),updateOn:"blur"}),obraSocial:new d.NI("",{validators:[(0,u.$k)(3,30,null,!0,!0)]}),imagen1:new d.NI("",{validators:[(0,u.FQ)()]}),imagen2:new d.NI("",{validators:[(0,u.FQ)()]}),correo:new d.NI("",{validators:[(0,u.qc)()],asyncValidators:(0,u.y$)(this.usuarioService,this.validarCorreo,this.formato),updateOn:"blur"}),clave:new d.NI("",{validators:[(0,u.$k)(6,20,null,!1,!1)]}),confirmarClave:new d.NI("",{validators:[(0,u.$k)(6,20,null,!1,!1)]})},[(0,u.U5)(6)])}obtenerErrores(r){return this.cargando?[]:Object.keys(r)}registrarUsuario(){this.formEsValido()?this.aFormGroup.invalid?this.toastService.error("Falta validar Captcha","Registro inv\xe1lido."):this.registrarUsuarioEnFirestore():this.toastService.error("Hay campos con errores. <br>Por favor corrijalos y vuelva a intentar","Registro inv\xe1lido.")}cargarArchivo(r,o){this.archivos[r]=o?.target?.files[0]}formEsValido(){for(const r in this.form.controls)if(this.form.controls.hasOwnProperty(r)&&this.form.controls[r]?.errors)return!1;return!(this.validarCorreo.validando||this.validarDni.validando)}registrarUsuarioEnFirestore(){var r=this;return(0,V.Z)(function*(){r.cargando=!0,r.authService.registrarUsuarioConVerificacion(r.correo?.value,r.clave?.value).then(o=>{let i=o.user?.uid;if(null!=i){let a=[];for(const s of r.archivos){let l=r.firestorageService.guardarArchivo(s,"fotosUsuario/"+r.nombre.value+"_"+Math.floor(1e3*Math.random())+"_"+r.formato.fechaToString(new Date,!1,!0));l.subscribe(c=>c),a.push(l)}(0,se.D)(a).subscribe(s=>{if(s&&2==s.length){let l=new m;l.id=i??"",l.obraSocial=r.obraSocial.value,l.nombre=r.nombre.value,l.apellido=r.apellido.value,l.dni=r.dni.value,l.correo=r.formato.eliminarEspaciosYPasarAMin_May(r.correo.value),l.edad=r.edad.value,l.habilitado=v.j.habilitado,l.correoRegistrado=!0,l.imagen1=s[0],l.imagen2=s[1],l.fechaRegistro=new Date,r.usuarioService.cargarUsuarioConIdAsignado(l).then(c=>{r.limpiarFormulario(),r.cargando=!1,r.toastService.exito("El registro se ha completado exitosamente!.","Registro exitoso"),r.authService.logOut(),r.usuarioService.limpiarUsuarioActual(),r.swalService.exito("El registro se ha completado exitosamente. Por favor, ingrese a su cuenta para verificar su correo electr\xf3nico y, a continuaci\xf3n, inicie sesi\xf3n.","AVISO"),r.router.navigate(["../login"])})}})}else r.toastService.error("Ha ocurrido un error al intentar guardar los datos del usuario registrado.","Ha ocurrido un error."),r.cargando=!1}).catch(o=>{r.obtenerErrorAuth(o)})})()}obtenerErrorAuth(r){let o="";switch(r.code){case"auth/invalid-email":o="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":o="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":o="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/email-already-in-use":o="El correo electr\xf3nico ingresado ya est\xe1 en uso.";break;default:o="Ha ocurrido un error y no se pudo registrar el usuario."}""!=o&&(this.toastService.error(o,"Ha ocurrido un error!"),this.cargando=!1)}limpiarFormulario(){this.form.reset(),this.archivos=[];for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(M.F0),e.Y36(te.e),e.Y36(p.y),e.Y36(W.i),e.Y36(d.qu),e.Y36(b.J),e.Y36(Qe),e.Y36(we.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registro-usuario"]],decls:72,vars:18,consts:[[1,"container"],[1,"row","w-100","d-flex","justify-content-center","ml-0"],[1,"col","col-12","justify-content-center","col-lg-12"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup"],[1,"display","justify-content-between","w-100"],[1,"width","p-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],[4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","text","id","edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","formControlName","dni",1,"form-control"],["for","obraSocial",1,"form-label"],["type","text","id","obraSocial","formControlName","obraSocial",1,"form-control"],["for","correo",1,"form-label"],["type","text","id","correo","formControlName","correo",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],["for","confirmarClave",1,"form-label"],["type","password","id","confirmarClave","formControlName","confirmarClave",1,"form-control"],["for","imagen1",1,"form-label"],["type","file","formControlName","imagen1","name","imagen1","id","imagen1","accept","image/png, image/jpeg, image/jpg",1,"form-control",3,"multiple","change"],["for","imagen2",1,"form-label"],["type","file","formControlName","imagen2","name","imagen2","id","imagen2","accept","image/png, image/jpeg, image/jpg",1,"form-control",3,"multiple","change"],["formControlName","recaptcha",3,"siteKey"],["captchaElem",""],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","mt-2","fw-bold",3,"click"],["type","button",1,"btn","btn-primary","mt-2","fw-bold",3,"click"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],[1,"d-flex","justify-content-start",2,"align-items","center","height","100% !important"],[1,"m-0","fs-6","fw-bold","text-primary"],[1,"spinner-border","text-primary",2,"align-self","center","scale","0.5"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"fieldset")(6,"legend"),e._uU(7," Complete sus datos para registrarse (USUARIO) "),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div")(11,"label",7),e._uU(12,"Nombre"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,Zn,2,1,"ng-container",9),e.qZA(),e.TgZ(15,"div")(16,"label",10),e._uU(17,"Apellido"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,Pn,2,1,"ng-container",9),e.qZA(),e.TgZ(20,"div")(21,"label",12),e._uU(22,"Edad"),e.qZA(),e._UZ(23,"input",13),e.YNc(24,Ln,2,1,"ng-container",9),e.qZA(),e.TgZ(25,"div")(26,"label",14),e._uU(27,"DNI"),e.qZA(),e._UZ(28,"input",15),e.YNc(29,Mn,5,0,"ng-container",9),e.YNc(30,qn,2,1,"ng-container",9),e.qZA(),e.TgZ(31,"div")(32,"label",16),e._uU(33,"Obra Social"),e.qZA(),e._UZ(34,"input",17),e.YNc(35,Bn,2,1,"ng-container",9),e.qZA()(),e.TgZ(36,"div",6)(37,"div")(38,"label",18),e._uU(39,"Correo Electronico"),e.qZA(),e._UZ(40,"input",19),e.YNc(41,Qn,5,0,"ng-container",9),e.YNc(42,Vn,2,1,"ng-container",9),e.qZA(),e.TgZ(43,"div")(44,"label",20),e._uU(45,"Contrase\xf1a"),e.qZA(),e._UZ(46,"input",21),e.YNc(47,$n,2,1,"ng-container",9),e.qZA(),e.TgZ(48,"div")(49,"label",22),e._uU(50,"Reingrese Contrase\xf1a"),e.qZA(),e._UZ(51,"input",23),e.YNc(52,Hn,2,1,"ng-container",9),e.qZA(),e.TgZ(53,"div")(54,"label",24),e._uU(55,"Imagen para Perfil (1)"),e.qZA(),e.TgZ(56,"input",25),e.NdJ("change",function(a){return o.cargarArchivo(0,a)}),e.qZA(),e.YNc(57,Kn,2,1,"ng-container",9),e.qZA(),e.TgZ(58,"div")(59,"label",26),e._uU(60,"Imagen para Perfil (2)"),e.qZA(),e.TgZ(61,"input",27),e.NdJ("change",function(a){return o.cargarArchivo(1,a)}),e.qZA(),e.YNc(62,Wn,2,1,"ng-container",9),e.qZA()()(),e.TgZ(63,"form",4),e._UZ(64,"ngx-recaptcha2",28,29),e.qZA(),e.TgZ(66,"div",30)(67,"button",31),e.NdJ("click",function(){return o.limpiarFormulario()}),e._uU(68," Limpiar "),e.qZA(),e.TgZ(69,"button",32),e.NdJ("click",function(){return o.registrarUsuario()}),e._uU(70," Registrar "),e.qZA()()()()()()()(),e.YNc(71,eo,1,0,"app-loader",9)),2&r&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("ngIf",null==o.nombre?null:o.nombre.errors),e.xp6(5),e.Q6J("ngIf",null==o.apellido?null:o.apellido.errors),e.xp6(5),e.Q6J("ngIf",null==o.edad?null:o.edad.errors),e.xp6(5),e.Q6J("ngIf",o.validarDni.validando),e.xp6(1),e.Q6J("ngIf",null==o.dni?null:o.dni.errors),e.xp6(5),e.Q6J("ngIf",null==o.obraSocial?null:o.obraSocial.errors),e.xp6(6),e.Q6J("ngIf",o.validarCorreo.validando),e.xp6(1),e.Q6J("ngIf",null==o.correo?null:o.correo.errors),e.xp6(5),e.Q6J("ngIf",null==o.clave?null:o.clave.errors),e.xp6(5),e.Q6J("ngIf",null==o.confirmarClave?null:o.confirmarClave.errors),e.xp6(4),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",null==o.imagen1?null:o.imagen1.errors),e.xp6(4),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",null==o.imagen2?null:o.imagen2.errors),e.xp6(1),e.Q6J("formGroup",o.aFormGroup),e.xp6(1),e.Q6J("siteKey",o.siteKey),e.xp6(7),e.Q6J("ngIf",o.cargando))},dependencies:[Z.sg,Z.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,Je.R,Ce.to],styles:[".error[_ngcontent-%COMP%]{color:red}.display[_ngcontent-%COMP%]{display:flex}.width[_ngcontent-%COMP%]{width:50%}@media (max-width: 700px){.display[_ngcontent-%COMP%]{display:block}.width[_ngcontent-%COMP%]{width:100%}}"]}),t})();class ro{constructor(){this.id="",this.correo="",this.nombre="",this.apellido="",this.dni=0,this.imagen="",this.edad=0,this.habilitado=v.j.espera,this.correoRegistrado=!1,this.perfil=K.L.administrador,this.fechaRegistro=new Date}}function no(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.nombre?null:o.nombre.getError(r).mensaje," ")}}function oo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,no,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.nombre?null:r.nombre.errors))}}function io(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.apellido?null:o.apellido.getError(r).mensaje," ")}}function ao(t,n){if(1&t&&(e.ynx(0),e.YNc(1,io,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.apellido?null:r.apellido.errors))}}function so(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.edad?null:o.edad.getError(r).mensaje," ")}}function lo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,so,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.edad?null:r.edad.errors))}}function co(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",31)(2,"span",32),e._uU(3,"Validando..."),e.qZA(),e._UZ(4,"div",33),e.qZA(),e.BQk())}function uo(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.dni?null:o.dni.getError(r).mensaje," ")}}function ho(t,n){if(1&t&&(e.ynx(0),e.YNc(1,uo,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.dni?null:r.dni.errors))}}function fo(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",31)(2,"span",32),e._uU(3,"Validando..."),e.qZA(),e._UZ(4,"div",33),e.qZA(),e.BQk())}function po(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.correo?null:o.correo.getError(r).mensaje," ")}}function mo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,po,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.correo?null:r.correo.errors))}}function go(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.clave?null:o.clave.getError(r).mensaje," ")}}function _o(t,n){if(1&t&&(e.ynx(0),e.YNc(1,go,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.clave?null:r.clave.errors))}}function vo(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.confirmarClave?null:o.confirmarClave.getError(r).mensaje," ")}}function bo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,vo,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.confirmarClave?null:r.confirmarClave.errors))}}function yo(t,n){if(1&t&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.imagen1?null:o.imagen1.getError(r).mensaje," ")}}function xo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,yo,2,1,"small",29),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.imagen1?null:r.imagen1.errors))}}function Ro(t,n){1&t&&e._UZ(0,"app-loader")}let To=(()=>{class t{get nombre(){return this.form?.get("nombre")}set nombre(r){this.form?.get("nombre")?.patchValue(r)}get apellido(){return this.form?.get("apellido")}set apellido(r){this.form?.get("apellido")?.patchValue(r)}get edad(){return this.form?.get("edad")}set edad(r){this.form?.get("edad")?.patchValue(r)}get dni(){return this.form?.get("dni")}set dni(r){this.form?.get("dni")?.patchValue(r)}get correo(){return this.form?.get("correo")}set correo(r){this.form?.get("correo")?.patchValue(r)}get clave(){return this.form?.get("clave")}set clave(r){this.form?.get("clave")?.patchValue(r)}get confirmarClave(){return this.form?.get("confirmarClave")}set confirmarClave(r){this.form?.get("confirmarClave")?.patchValue(r)}get imagen1(){return this.form?.get("imagen1")}set imagen1(r){this.form?.get("imagen1")?.patchValue(r)}constructor(r,o,i,a,s,l,c,h){this.router=r,this.authService=o,this.formato=i,this.usuarioService=a,this.swalService=s,this.formBuilder=l,this.firestorageService=c,this.toastService=h,this.cargando=!1,this.archivos=[],this.siteKey="6LfKPZEmAAAAAGDBK0uVurfxhxuQGydWQI2jjlBe",this.validarCorreo=new f,this.validarDni=new f}ngOnInit(){this.aFormGroup=this.formBuilder.group({recaptcha:["",d.kI.required]}),this.form=new d.cw({nombre:new d.NI("",{validators:[(0,u.$k)(3,30,null,!0,!0)]}),apellido:new d.NI("",{validators:[(0,u.$k)(3,30,null,!0,!0)]}),edad:new d.NI("",{validators:[(0,u.Ms)(18,99)]}),dni:new d.NI("",{validators:[(0,u.Ms)(1e7,99999999)],asyncValidators:(0,u.j8)(this.usuarioService,this.validarDni),updateOn:"blur"}),imagen1:new d.NI("",{validators:[(0,u.FQ)()]}),correo:new d.NI("",{validators:[(0,u.qc)()],asyncValidators:(0,u.y$)(this.usuarioService,this.validarCorreo,this.formato),updateOn:"blur"}),clave:new d.NI("",{validators:[(0,u.$k)(6,20,null,!1,!1)]}),confirmarClave:new d.NI("",{validators:[(0,u.$k)(6,20,null,!1,!1)]})},[(0,u.U5)(6)])}obtenerErrores(r){return this.cargando?[]:Object.keys(r)}registrarUsuario(){this.formEsValido()?this.aFormGroup.invalid?this.toastService.error("Falta validar Captcha","Registro inv\xe1lido."):this.registrarUsuarioEnFirestore():this.toastService.error("Hay campos con errores. <br>Por favor corrijalos y vuelva a intentar","Registro inv\xe1lido.")}cargarArchivo(r,o){this.archivos[r]=o?.target?.files[0]}formEsValido(){for(const r in this.form.controls)if(this.form.controls.hasOwnProperty(r)&&this.form.controls[r]?.errors)return!1;return!(this.validarCorreo.validando||this.validarDni.validando)}registrarUsuarioEnFirestore(){this.cargando=!0,this.authService.registrarUsuarioConVerificacion(this.correo?.value,this.clave?.value).then(r=>{let o=r.user?.uid;if(null!=o){let i=[];for(const a of this.archivos){let s=this.firestorageService.guardarArchivo(a,"fotosUsuario/"+this.nombre.value+"_"+Math.floor(1e3*Math.random())+"_"+this.formato.fechaToString(new Date,!1,!0));s.subscribe(l=>l),i.push(s)}(0,se.D)(i).subscribe(a=>{if(a&&1==a.length){let s=new ro;s.id=o??"",s.nombre=this.nombre.value,s.apellido=this.apellido.value,s.dni=this.dni.value,s.correo=this.formato.eliminarEspaciosYPasarAMin_May(this.correo.value),s.edad=this.edad.value,s.habilitado=v.j.habilitado,s.correoRegistrado=!0,s.imagen=a[0],s.fechaRegistro=new Date,this.usuarioService.cargarUsuarioConIdAsignado(s).then(l=>{this.limpiarFormulario(),this.cargando=!1,this.toastService.exito("El registro se ha completado exitosamente!.","Registro exitoso"),this.authService.logOut(),this.usuarioService.limpiarUsuarioActual(),this.swalService.exito("El registro se ha completado exitosamente. Por favor, ingrese a su cuenta para verificar su correo electr\xf3nico y, a continuaci\xf3n, inicie sesi\xf3n.","AVISO"),this.router.navigate(["../login"])})}})}else this.toastService.error("Ha ocurrido un error al intentar guardar los datos del usuario registrado.","Ha ocurrido un error."),this.cargando=!1}).catch(r=>{this.obtenerErrorAuth(r)})}obtenerErrorAuth(r){let o="";switch(r.code){case"auth/invalid-email":o="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":o="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":o="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/email-already-in-use":o="El correo electr\xf3nico ingresado ya est\xe1 en uso.";break;default:o="Ha ocurrido un error y no se pudo registrar el usuario."}""!=o&&(this.toastService.error(o,"Ha ocurrido un error!"),this.cargando=!1)}limpiarFormulario(){this.form.reset(),this.archivos=[];for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(M.F0),e.Y36(te.e),e.Y36(p.y),e.Y36(W.i),e.Y36(b.J),e.Y36(d.qu),e.Y36(Qe),e.Y36(we.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registro-admin"]],decls:62,vars:15,consts:[[1,"container"],[1,"row","w-100","d-flex","justify-content-center","ml-0"],[1,"col","col-12","justify-content-center","col-lg-12"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup"],[1,"display","justify-content-between","w-100"],[1,"width","p-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],[4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","text","id","edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","formControlName","dni",1,"form-control"],["for","correo",1,"form-label"],["type","text","id","correo","formControlName","correo",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],["for","confirmarClave",1,"form-label"],["type","password","id","confirmarClave","formControlName","confirmarClave",1,"form-control"],["for","imagen1",1,"form-label"],["type","file","formControlName","imagen1","name","imagen1","id","imagen1","accept","image/png, image/jpeg, image/jpg",1,"form-control",3,"multiple","change"],["formControlName","recaptcha",3,"siteKey"],["captchaElem",""],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","mt-2","fw-bold",3,"click"],["type","button",1,"btn","btn-primary","mt-2","fw-bold",3,"click"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],[1,"d-flex","justify-content-start",2,"align-items","center","height","100% !important"],[1,"m-0","fs-6","fw-bold","text-primary"],[1,"spinner-border","text-primary",2,"align-self","center","scale","0.5"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"fieldset")(6,"legend"),e._uU(7," Complete sus datos para registrarse (ADMIN) "),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div")(11,"label",7),e._uU(12,"Nombre"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,oo,2,1,"ng-container",9),e.qZA(),e.TgZ(15,"div")(16,"label",10),e._uU(17,"Apellido"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,ao,2,1,"ng-container",9),e.qZA(),e.TgZ(20,"div")(21,"label",12),e._uU(22,"Edad"),e.qZA(),e._UZ(23,"input",13),e.YNc(24,lo,2,1,"ng-container",9),e.qZA(),e.TgZ(25,"div")(26,"label",14),e._uU(27,"DNI"),e.qZA(),e._UZ(28,"input",15),e.YNc(29,co,5,0,"ng-container",9),e.YNc(30,ho,2,1,"ng-container",9),e.qZA()(),e.TgZ(31,"div",6)(32,"div")(33,"label",16),e._uU(34,"Correo Electronico"),e.qZA(),e._UZ(35,"input",17),e.YNc(36,fo,5,0,"ng-container",9),e.YNc(37,mo,2,1,"ng-container",9),e.qZA(),e.TgZ(38,"div")(39,"label",18),e._uU(40,"Contrase\xf1a"),e.qZA(),e._UZ(41,"input",19),e.YNc(42,_o,2,1,"ng-container",9),e.qZA(),e.TgZ(43,"div")(44,"label",20),e._uU(45,"Reingrese Contrase\xf1a"),e.qZA(),e._UZ(46,"input",21),e.YNc(47,bo,2,1,"ng-container",9),e.qZA(),e.TgZ(48,"div")(49,"label",22),e._uU(50,"Imagen para Perfil"),e.qZA(),e.TgZ(51,"input",23),e.NdJ("change",function(a){return o.cargarArchivo(0,a)}),e.qZA(),e.YNc(52,xo,2,1,"ng-container",9),e.qZA()()(),e.TgZ(53,"form",4),e._UZ(54,"ngx-recaptcha2",24,25),e.qZA(),e.TgZ(56,"div",26)(57,"button",27),e.NdJ("click",function(){return o.limpiarFormulario()}),e._uU(58," Limpiar "),e.qZA(),e.TgZ(59,"button",28),e.NdJ("click",function(){return o.registrarUsuario()}),e._uU(60," Registrar "),e.qZA()()()()()()()(),e.YNc(61,Ro,1,0,"app-loader",9)),2&r&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("ngIf",null==o.nombre?null:o.nombre.errors),e.xp6(5),e.Q6J("ngIf",null==o.apellido?null:o.apellido.errors),e.xp6(5),e.Q6J("ngIf",null==o.edad?null:o.edad.errors),e.xp6(5),e.Q6J("ngIf",o.validarDni.validando),e.xp6(1),e.Q6J("ngIf",null==o.dni?null:o.dni.errors),e.xp6(6),e.Q6J("ngIf",o.validarCorreo.validando),e.xp6(1),e.Q6J("ngIf",null==o.correo?null:o.correo.errors),e.xp6(5),e.Q6J("ngIf",null==o.clave?null:o.clave.errors),e.xp6(5),e.Q6J("ngIf",null==o.confirmarClave?null:o.confirmarClave.errors),e.xp6(4),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",null==o.imagen1?null:o.imagen1.errors),e.xp6(1),e.Q6J("formGroup",o.aFormGroup),e.xp6(1),e.Q6J("siteKey",o.siteKey),e.xp6(7),e.Q6J("ngIf",o.cargando))},dependencies:[Z.sg,Z.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,Je.R,Ce.to],styles:[".error[_ngcontent-%COMP%]{color:red}.display[_ngcontent-%COMP%]{display:flex}.width[_ngcontent-%COMP%]{width:50%}@media (max-width: 700px){.display[_ngcontent-%COMP%]{display:block}.width[_ngcontent-%COMP%]{width:100%}}"]}),t})();class Eo{constructor(){this.id="",this.correo="",this.nombre="",this.apellido="",this.dni=0,this.imagen="",this.edad=0,this.correoRegistrado=!1,this.perfil=K.L.especialista,this.especialidades=[],this.fechaRegistro=new Date,this.habilitado=v.j.espera,this.horarios=[]}}var Ft=g(1588),Lt=g(2668),Ao=g(9215);function wo(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.nombre?null:o.nombre.getError(r).mensaje," ")}}function Co(t,n){if(1&t&&(e.ynx(0),e.YNc(1,wo,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.nombre?null:r.nombre.errors))}}function Uo(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.apellido?null:o.apellido.getError(r).mensaje," ")}}function ko(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Uo,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.apellido?null:r.apellido.errors))}}function So(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.edad?null:o.edad.getError(r).mensaje," ")}}function Io(t,n){if(1&t&&(e.ynx(0),e.YNc(1,So,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.edad?null:r.edad.errors))}}function No(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",44)(2,"span",45),e._uU(3,"Validando..."),e.qZA(),e._UZ(4,"div",46),e.qZA(),e.BQk())}function Zo(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.dni?null:o.dni.getError(r).mensaje," ")}}function Oo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Zo,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.dni?null:r.dni.errors))}}function Po(t,n){if(1&t&&(e.TgZ(0,"option",47),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&t){const r=n.$implicit;e.s9C("value",r.id),e.xp6(1),e.hij(" ",e.lcZ(2,2,r.nombre)," ")}}function Fo(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.especialidad?null:o.especialidad.getError(r).mensaje," ")}}function Lo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Fo,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.especialidad?null:r.especialidad.errors))}}function Mo(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",44)(2,"span",45),e._uU(3,"Validando..."),e.qZA(),e._UZ(4,"div",46),e.qZA(),e.BQk())}function Do(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.otroEspecialidad?null:o.otroEspecialidad.getError(r).mensaje," ")}}function qo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Do,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.otroEspecialidad?null:r.otroEspecialidad.errors))}}function jo(t,n){1&t&&(e.ynx(0),e.TgZ(1,"div",44)(2,"span",45),e._uU(3,"Validando..."),e.qZA(),e._UZ(4,"div",46),e.qZA(),e.BQk())}function Bo(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.correo?null:o.correo.getError(r).mensaje," ")}}function Qo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Bo,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.correo?null:r.correo.errors))}}function Jo(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.clave?null:o.clave.getError(r).mensaje," ")}}function Vo(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Jo,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.clave?null:r.clave.errors))}}function Yo(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.confirmarClave?null:o.confirmarClave.getError(r).mensaje," ")}}function $o(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Yo,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.confirmarClave?null:r.confirmarClave.errors))}}function Go(t,n){if(1&t&&(e.TgZ(0,"small",43),e._uU(1),e.qZA()),2&t){const r=n.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.imagen1?null:o.imagen1.getError(r).mensaje," ")}}function Ho(t,n){if(1&t&&(e.ynx(0),e.YNc(1,Go,2,1,"small",42),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.imagen1?null:r.imagen1.errors))}}function zo(t,n){if(1&t&&e._UZ(0,"app-loader",48),2&t){const r=e.oxw();e.Q6J("texto",r.textoCarga)}}const Ko=function(t){return{deshabilitado:t}},Xo=[{path:"",component:ke,children:[{path:"usuario",component:to},{path:"administrador",component:To,canActivate:[(()=>{class t{constructor(r,o){this.usuarioService=r,this.router=o}canActivate(r,o){return!(!this.usuarioService.getUsuarioActualBasico||this.usuarioService.getUsuarioActualBasico.perfil!=K.L.administrador)||(this.router.navigate(["home"]),!1)}canActivateChild(r,o){return!0}canDeactivate(r,o,i,a){return!0}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(W.i),e.LFG(M.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"especialista",component:(()=>{class t{get nombre(){return this.form?.get("nombre")}set nombre(r){this.form?.get("nombre")?.patchValue(r)}get apellido(){return this.form?.get("apellido")}set apellido(r){this.form?.get("apellido")?.patchValue(r)}get edad(){return this.form?.get("edad")}set edad(r){this.form?.get("edad")?.patchValue(r)}get dni(){return this.form?.get("dni")}set dni(r){this.form?.get("dni")?.patchValue(r)}get correo(){return this.form?.get("correo")}set correo(r){this.form?.get("correo")?.patchValue(r)}get clave(){return this.form?.get("clave")}set clave(r){this.form?.get("clave")?.patchValue(r)}get confirmarClave(){return this.form?.get("confirmarClave")}set confirmarClave(r){this.form?.get("confirmarClave")?.patchValue(r)}get imagen1(){return this.form?.get("imagen1")}set imagen1(r){this.form?.get("imagen1")?.patchValue(r)}get especialidad(){return this.form?.get("especialidad")}set especialidad(r){this.form?.get("especialidad")?.patchValue(r)}get selectEspecialidades(){return this.form?.get("selectEspecialidades")}set selectEspecialidades(r){this.form?.get("selectEspecialidades")?.patchValue(r)}get otroEspecialidad(){return this.form?.get("otroEspecialidad")}set otroEspecialidad(r){this.form?.get("otroEspecialidad")?.patchValue(r)}get otro(){return this.form?.get("otro")}set otro(r){this.form?.get("otro")?.patchValue(r)}constructor(r,o,i,a,s,l,c,h,_,E,x,R){this.router=r,this.authService=o,this.swalService=i,this.especialidadService=a,this.formatoService=s,this.formato=l,this.usuarioService=c,this.firestorageService=h,this.formBuilder=_,this.solicitudService=E,this.especialidadesServices=x,this.toastService=R,this.cargando=!1,this.archivos=[],this.especialidades=[],this.especialidadesVisibles=[],this.especialidadesSeleccionadas=[],this.textoCarga="Cargando...",this.siteKey="6LfKPZEmAAAAAGDBK0uVurfxhxuQGydWQI2jjlBe",this.validarCorreo=new f,this.validarDni=new f,this.validarEspecialidad=new f,this.usuarioActual=null}ngOnInit(){this.aFormGroup=this.formBuilder.group({recaptcha:["",d.kI.required]}),this.usuarioService.obtenerUsuarioActual().then(r=>{this.usuarioActual=r}),this.especialidadesServices.obtenerListadoDeEspecialidadesObservable().subscribe(r=>{this.especialidades=r.map(o=>({nombre:o.nombre,id:o.id})),this.especialidades.unshift({nombre:"Otro",id:0}),this.especialidadesVisibles=this.especialidades}),this.form=new d.cw({nombre:new d.NI("",{validators:[(0,u.$k)(3,30,null,!0,!0)]}),apellido:new d.NI("",{validators:[(0,u.$k)(3,30,null,!0,!0)]}),edad:new d.NI("",{validators:[(0,u.Ms)(18,99)]}),dni:new d.NI("",{validators:[(0,u.Ms)(1e7,99999999)],asyncValidators:(0,u.j8)(this.usuarioService,this.validarDni),updateOn:"blur"}),imagen1:new d.NI("",{validators:[(0,u.FQ)()]}),correo:new d.NI("",{validators:[(0,u.qc)()],asyncValidators:(0,u.y$)(this.usuarioService,this.validarCorreo,this.formato),updateOn:"blur"}),clave:new d.NI("",{validators:[(0,u.$k)(6,20,null,!1,!1)]}),confirmarClave:new d.NI("",{validators:[(0,u.$k)(6,20,null,!1,!1)]}),especialidad:new d.NI("",{validators:[(0,u.$k)(1,150,null)]}),otro:new d.NI(""),otroEspecialidad:new d.NI("",{validators:[(0,u.$k)(1,150,null)],asyncValidators:(0,u.sH)(this.especialidadesServices,this.validarEspecialidad,this.formato),updateOn:"blur"}),selectEspecialidades:new d.NI("")},[(0,u.U5)(6),(0,u.wb)(3,30,"otro","otroEspecialidad",null,!1,!0)])}obtenerErrores(r){return this.cargando?[]:Object.keys(r)}registrarUsuario(){this.formEsValido()?this.aFormGroup.invalid?this.toastService.error("Falta validar Captcha","Registro inv\xe1lido."):this.realizarSolicitud():this.toastService.error("Hay campos con errores. <br>Por favor corrijalos y vuelva a intentar","Registro inv\xe1lido.")}cargarArchivo(r,o){this.archivos[r]=o?.target?.files[0]}formEsValido(){for(const r in this.form.controls)if(this.form.controls.hasOwnProperty(r)&&this.form.controls[r]?.errors)return!1;return!(this.validarCorreo.validando||this.validarDni.validando||this.validarEspecialidad.validando)}realizarSolicitud(){this.cargando=!0,this.desuscribir();let r={};r.id=(0,Ft.Z)(),r.nombre=this.nombre.value,r.apellido=this.apellido.value,r.dni=this.dni.value,r.correo=this.formato.eliminarEspaciosYPasarAMin_May(this.correo.value),r.edad=this.edad.value,r.habilitado=v.j.espera,r.correoRegistrado=!0,r.otroEspecialidad=this.otro.value?this.formato.eliminarEspaciosYPasarAMin_May(this.otroEspecialidad.value):"",r.especialidades=this.especialidadesSeleccionadas.length>0?this.especialidadesSeleccionadas:[],r.fechaRegistro=new Date,null==this.usuarioActual?this.solicitudService.cargarSolicitudConIdAsignado(r).then(o=>{this.esperandoHabilitacion(r)}):this.usuarioActual.perfil==K.L.administrador&&this.aceptarAutomaticamente(r)}aceptarAutomaticamente(r){if(r.habilitado=v.j.habilitado,""!=r.otroEspecialidad){let o={id:(0,Ft.Z)(),nombre:this.formatoService.eliminarEspaciosYPasarAMin_May(r.otroEspecialidad)};this.especialidadService.cargarEspecialidadConIdAsignado(o).then(i=>{r.especialidades.push(o),this.cargarUsuarioAceptado(r)})}else this.cargarUsuarioAceptado(r)}cargarUsuarioAceptado(r){this.authService.registrarUsuarioConVerificacion(this.correo?.value,this.clave?.value).then(o=>{let i=o.user?.uid;null!=i&&null!=i?this.solicitudService.eliminarSolicitud(r.id).then(a=>{let s=[];for(const l of this.archivos){let c=this.firestorageService.guardarArchivo(l,"fotosUsuario/"+this.nombre.value+"_"+Math.floor(1e3*Math.random())+"_"+this.formato.fechaToString(new Date,!1,!0));c.subscribe(h=>h),s.push(c)}(0,se.D)(s).subscribe(l=>{if(l&&1==l.length){let c=new Eo;c.apellido=r.apellido,c.correo=r.correo,c.correoRegistrado=r.correoRegistrado,c.dni=r.dni,c.edad=r.edad,c.especialidades=r.especialidades,c.fechaRegistro=r.fechaRegistro,c.imagen=l[0],c.nombre=r.nombre,c.id=i??"",c.habilitado=v.j.habilitado,this.usuarioService.cargarUsuarioConIdAsignado(c).then(h=>{this.cargando=!1,null==this.usuarioActual&&this.toastService.exito("Se ha habilitado su ingreso!","Aviso.",3500),this.authService.logOut(),this.usuarioService.limpiarUsuarioActual(),this.swalService.exito("El registro se ha completado exitosamente. Por favor, ingrese a su cuenta para verificar su correo electr\xf3nico y, a continuaci\xf3n, inicie sesi\xf3n.","AVISO"),this.router.navigate(["../login"])})}})}):(this.toastService.error("Ha ocurrido un error al intentar guardar los datos del usuario registrado.","Ha ocurrido un error."),this.cargando=!1)}).catch(o=>{this.obtenerErrorAuth(o)})}obtenerErrorAuth(r){let o="";switch(r.code){case"auth/invalid-email":o="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":o="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":o="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/email-already-in-use":o="El correo electr\xf3nico ingresado ya est\xe1 en uso.";break;default:o="Ha ocurrido un error y no se pudo registrar el usuario."}""!=o&&(this.toastService.error(o,"Ha ocurrido un error!"),this.cargando=!1)}limpiarFormulario(){this.form.reset(),this.archivos=[];for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("");this.limpiarEspecialidad(),this.textoCarga="Cargando..."}limpiarEspecialidad(){this.especialidadesSeleccionadas=[],this.especialidadesVisibles=this.especialidades,this.selectEspecialidades.enable(),this.selectEspecialidades=-1,this.especialidad="",this.otroEspecialidad="",this.otro=!1}checked(r){r.target.checked||this.limpiarEspecialidad()}seleccion(r){let o=r.target.value,i=this.especialidades.filter(a=>a.id==o)[0];0==i.id?(this.especialidad=i.nombre,this.otro=!0,this.selectEspecialidades.disable()):(this.especialidad=""==this.especialidad.value?i.nombre:`${this.especialidad.value}/${i.nombre}`,this.especialidadesSeleccionadas.push(i),this.especialidadesVisibles=this.especialidades.filter(a=>!this.especialidadesSeleccionadas.includes(a)),this.selectEspecialidades=-1)}esperandoHabilitacion(r){var o=this;return(0,V.Z)(function*(){o.desuscribir(),o.textoCarga="Aguarde unos instantes. Esperando habilitaci\xf3n...",o.suscripcion=o.solicitudService.traerSolicitudPorId_Observable(r.id).subscribe(i=>{if(i&&1==i.length){let a=i[0];a&&a.habilitado!=v.j.espera&&(a.habilitado==v.j.habilitado?o.cargarUsuarioAceptado(a):a.habilitado==v.j.rechazado&&o.solicitudService.eliminarSolicitud(a.id).then(s=>{o.cargando=!1,o.toastService.error("Se ha rechazado su solicitud. Motivo: "+a.mensajeEstado,"Aviso",4e3)}))}})})()}desuscribir(){this.suscripcion&&this.suscripcion.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(M.F0),e.Y36(te.e),e.Y36(b.J),e.Y36(Lt.T),e.Y36(p.y),e.Y36(p.y),e.Y36(W.i),e.Y36(Qe),e.Y36(d.qu),e.Y36(Ao.M),e.Y36(Lt.T),e.Y36(we.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registro-especialista"]],decls:87,vars:23,consts:[[1,"container"],[1,"row","w-100","d-flex","justify-content-center","ml-0"],[1,"col","col-12","justify-content-center","col-lg-12"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup"],[1,"display","justify-content-between","w-100"],[1,"width","p-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],[4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","text","id","edad","formControlName","edad",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","formControlName","dni",1,"form-control"],["for","especialidad",1,"form-label","d-block"],["name","selectEspecialidades","id","selectEspecialidades","formControlName","selectEspecialidades",1,"w-100","form-select",3,"change"],["selected","","disabled","","value","-1"],[3,"value",4,"ngFor","ngForOf"],["readonly","","type","text","id","especialidad","formControlName","especialidad",1,"form-control","deshabilitado","fijo"],[1,"form-check"],["for","otroEspecialidad",1,"form-check-label"],["type","checkbox","formControlName","otro","id","otro","name","otro",1,"form-check-input",3,"change"],["check",""],["type","text","formControlName","otroEspecialidad","id","otroEspecialidad","name","otroEspecialidad",1,"form-control",3,"ngClass","readOnly"],[1,"d-flex","justify-content-end"],[1,"btn","btn-secondary","mt-2","fw-bold",3,"click"],["for","correo",1,"form-label"],["type","text","id","correo","formControlName","correo",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],["for","confirmarClave",1,"form-label"],["type","password","id","confirmarClave","formControlName","confirmarClave",1,"form-control"],["for","imagen1",1,"form-label"],["type","file","formControlName","imagen1","name","imagen1","id","imagen1","accept","image/png, image/jpeg, image/jpg",1,"form-control",3,"multiple","change"],["formControlName","recaptcha",3,"siteKey"],["captchaElem",""],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","mt-2","fw-bold",3,"click"],["type","button",1,"btn","btn-primary","mt-2","fw-bold",3,"click"],[3,"texto",4,"ngIf"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],[1,"d-flex","justify-content-start",2,"align-items","center","height","100% !important"],[1,"m-0","fs-6","fw-bold","text-primary"],[1,"spinner-border","text-primary",2,"align-self","center","scale","0.5"],[3,"value"],[3,"texto"]],template:function(r,o){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"fieldset")(6,"legend"),e._uU(7," Complete sus datos para registrarse (ESPECIALISTA) "),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div")(11,"label",7),e._uU(12,"Nombre"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,Co,2,1,"ng-container",9),e.qZA(),e.TgZ(15,"div")(16,"label",10),e._uU(17,"Apellido"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,ko,2,1,"ng-container",9),e.qZA(),e.TgZ(20,"div")(21,"label",12),e._uU(22,"Edad"),e.qZA(),e._UZ(23,"input",13),e.YNc(24,Io,2,1,"ng-container",9),e.qZA(),e.TgZ(25,"div")(26,"label",14),e._uU(27,"DNI"),e.qZA(),e._UZ(28,"input",15),e.YNc(29,No,5,0,"ng-container",9),e.YNc(30,Oo,2,1,"ng-container",9),e.qZA()(),e.TgZ(31,"div",6)(32,"label",16),e._uU(33,"Especialidades"),e.qZA(),e.TgZ(34,"div")(35,"select",17),e.NdJ("change",function(a){return o.seleccion(a)}),e.TgZ(36,"optgroup")(37,"option",18),e._uU(38,"Seleccione especialidad..."),e.qZA(),e.YNc(39,Po,3,4,"option",19),e.qZA()()(),e.TgZ(40,"label"),e._uU(41,"Especialidades seleccionadas"),e.qZA(),e._UZ(42,"textarea",20),e.YNc(43,Lo,2,1,"ng-container",9),e.TgZ(44,"div")(45,"div",21)(46,"label",22),e._uU(47,"Agregar otra especialidad"),e.qZA(),e.TgZ(48,"input",23,24),e.NdJ("change",function(a){return o.checked(a)}),e.qZA()(),e._UZ(50,"input",25),e.YNc(51,Mo,5,0,"ng-container",9),e.YNc(52,qo,2,1,"ng-container",9),e.qZA(),e.TgZ(53,"div",26)(54,"button",27),e.NdJ("click",function(){return o.limpiarEspecialidad()}),e._uU(55,"Limpiar Especialidades"),e.qZA()()(),e.TgZ(56,"div",6)(57,"div")(58,"label",28),e._uU(59,"Correo Electronico"),e.qZA(),e._UZ(60,"input",29),e.YNc(61,jo,5,0,"ng-container",9),e.YNc(62,Qo,2,1,"ng-container",9),e.qZA(),e.TgZ(63,"div")(64,"label",30),e._uU(65,"Contrase\xf1a"),e.qZA(),e._UZ(66,"input",31),e.YNc(67,Vo,2,1,"ng-container",9),e.qZA(),e.TgZ(68,"div")(69,"label",32),e._uU(70,"Reingrese Contrase\xf1a"),e.qZA(),e._UZ(71,"input",33),e.YNc(72,$o,2,1,"ng-container",9),e.qZA(),e.TgZ(73,"div")(74,"label",34),e._uU(75,"Imagen para Perfil"),e.qZA(),e.TgZ(76,"input",35),e.NdJ("change",function(a){return o.cargarArchivo(0,a)}),e.qZA(),e.YNc(77,Ho,2,1,"ng-container",9),e.qZA()()(),e.TgZ(78,"form",4),e._UZ(79,"ngx-recaptcha2",36,37),e.qZA(),e.TgZ(81,"div",38)(82,"button",39),e.NdJ("click",function(){return o.limpiarFormulario()}),e._uU(83," Limpiar "),e.qZA(),e.TgZ(84,"button",40),e.NdJ("click",function(){return o.registrarUsuario()}),e._uU(85," Registrar "),e.qZA()()()()()()()(),e.YNc(86,zo,1,1,"app-loader",41)),2&r){const i=e.MAs(49);e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("ngIf",null==o.nombre?null:o.nombre.errors),e.xp6(5),e.Q6J("ngIf",null==o.apellido?null:o.apellido.errors),e.xp6(5),e.Q6J("ngIf",null==o.edad?null:o.edad.errors),e.xp6(5),e.Q6J("ngIf",o.validarDni.validando),e.xp6(1),e.Q6J("ngIf",null==o.dni?null:o.dni.errors),e.xp6(9),e.Q6J("ngForOf",o.especialidadesVisibles),e.xp6(4),e.Q6J("ngIf",null==o.especialidad?null:o.especialidad.errors),e.xp6(7),e.Q6J("ngClass",e.VKq(21,Ko,!i.checked))("readOnly",!i.checked),e.xp6(1),e.Q6J("ngIf",o.validarEspecialidad.validando),e.xp6(1),e.Q6J("ngIf",null==o.otroEspecialidad?null:o.otroEspecialidad.errors),e.xp6(9),e.Q6J("ngIf",o.validarCorreo.validando),e.xp6(1),e.Q6J("ngIf",null==o.correo?null:o.correo.errors),e.xp6(5),e.Q6J("ngIf",null==o.clave?null:o.clave.errors),e.xp6(5),e.Q6J("ngIf",null==o.confirmarClave?null:o.confirmarClave.errors),e.xp6(4),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",null==o.imagen1?null:o.imagen1.errors),e.xp6(1),e.Q6J("formGroup",o.aFormGroup),e.xp6(1),e.Q6J("siteKey",o.siteKey),e.xp6(7),e.Q6J("ngIf",o.cargando)}},dependencies:[Z.mk,Z.sg,Z.O5,d._Y,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.JL,d.sg,d.u,Je.R,Ce.to,Z.rS],styles:[".error[_ngcontent-%COMP%]{color:red}.deshabilitado[_ngcontent-%COMP%]{background-color:var(--bs-secondary-bg)!important}.display[_ngcontent-%COMP%]{display:flex}.width[_ngcontent-%COMP%]{width:30%}.fijo[_ngcontent-%COMP%]{resize:none;height:auto}@media (max-width: 700px){.display[_ngcontent-%COMP%]{display:block}.width[_ngcontent-%COMP%]{width:100%}}"]}),t})()}]}];let Wo=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[M.Bz.forChild(Xo),M.Bz]}),t})();var ei=g(4466);let ti=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Z.ez,Wo,d.u5,d.UX,ei.m,Ce.e7]}),t})()},5708:(Mt,me,g)=>{g.d(me,{$k:()=>K,FQ:()=>V,Ms:()=>M,U5:()=>te,j8:()=>Ue,qc:()=>e,qe:()=>d,sH:()=>ke,wb:()=>se,y$:()=>W});var Z=g(4004);function M(v,m,f=null){return u=>{const p=u,b={};return""==p?.value||null==p?.value||null==p?.value?b.campoVacio={hayError:!0,mensaje:null!=f&&null!=f.campoVacio?f.campoVacio:"Campo requerido."}:isNaN(p?.value)||p?.value?.includes(".")||p?.value?.includes(",")?b.textoInvalido={hayError:!0,mensaje:null!=f&&null!=f.textoInvalido?f.textoInvalido:"Solo se pueden ingresar caracteres num\xe9ricos."}:(p?.value<v||p?.value>m)&&(b.valorInvalido={hayError:!0,mensaje:null!=f&&null!=f.valorInvalido?f.valorInvalido:`Solo se admiten valores entre ${v} y ${m}.`}),Object.keys(b).length?(p?.setErrors(b),b):(p?.setErrors(null),null)}}function K(v,m,f=null,u=!1,p=!0){return b=>{const C=b,O={};let Y=null==C?.value||null==C?.value||""==C?.value.trim();return Y?O.campoVacio={hayError:!0,mensaje:null!=f&&null!=f.campoVacio?f.campoVacio:"Campo requerido."}:C?.value.length<v?O.lenMinimo={hayError:!0,mensaje:null!=f&&null!=f.lenMinimo?f.lenMinimo:`Solo se admite un m\xednimo de ${v} caracteres.`}:C?.value.length>m&&(O.lenMaximo={hayError:!0,mensaje:null!=f&&null!=f.lenMaximo?f.lenMaximo:`Solo se admite un m\xe1ximo de ${m} caracteres.`}),u?!Y&&!(p?/^[a-zA-Z\s]+$/:/^[a-zA-Z]+$/).test(C.value)&&(O.textoInvalido={hayError:!0,mensaje:null!=f&&null!=f.textoInvalido?f.textoInvalido:`Solo se admiten letras a-z ${p?"":"(sin espacios)"}.`}):p||!Y&&/\s/.test(C.value)&&(O.textoInvalido={hayError:!0,mensaje:null!=f&&null!=f.textoInvalido?f.textoInvalido:"No se admiten espacios."}),Object.keys(O).length?(C?.setErrors(O),O):(C?.setErrors(null),null)}}function e(){return v=>{const m=v,u={};return null==m?.value||null==m?.value||""==m?.value.trim()?u.campoVacio={hayError:!0,mensaje:"Campo requerido."}:/^([a-zA-Z0-9_\.]+@+[a-zA-Z]+(\.)+[a-zA-Z]{2,3})$/.test(v.value)||(u.formatoInvalido={hayError:!0,mensaje:"El formato de correo electr\xf3nico es invalido. "}),Object.keys(u).length?(m?.setErrors(u),u):(m?.setErrors(null),null)}}function te(v){return m=>{const f=m.get("clave"),u=m.get("confirmarClave"),p={};return f?.value!==u?.value&&(p.clavesDistintas={hayError:!0,mensaje:"Las clave y confirmaci\xf3n NO conciden."}),null==u?.value||null==u?.value||""==u?.value.trim()?p.campoVacio={hayError:!0,mensaje:"Campo requerido."}:u?.value.length<v&&(p.longitudInvalida={hayError:!0,mensaje:`La confirmaci\xf3n de clave debe contener por lo menos ${v} caracteres. \n`}),Object.keys(p).length?(u?.setErrors(p),p):(u?.setErrors(null),null)}}function W(v,m,f){return u=>{m.validando=!0;const p=f.eliminarEspaciosYPasarAMin_May(u.value),b={};return v.traerListaDeCorreosFiltradaConObservable(p).pipe((0,Z.U)(C=>C.length>0&&(b.datoExistente={hayError:!0,mensaje:"El correo electr\xf3nico ingresado ya existe."},Object.keys(b).length)?(u?.setErrors(b),m.validando=!1,b):(u?.setErrors(null),m.validando=!1,null)))}}function Ue(v,m){return f=>{m.validando=!0;const p={};return v.traerListaDeDniFiltradaConObservable(f.value).pipe((0,Z.U)(b=>b.length>0&&(p.datoExistente={hayError:!0,mensaje:"El dni ingresado ya se encuentra cargado en el sistema."},Object.keys(p).length)?(f?.setErrors(p),m.validando=!1,p):(f?.setErrors(null),m.validando=!1,null)))}}function ke(v,m,f){return u=>{m.validando=!0;const p=f.eliminarEspaciosYPasarAMin_May(u.value),b={};return v.traerListaDeEspecialidadesFiltradaConObservable(p).pipe((0,Z.U)(C=>C.length>0&&(b.datoExistente={hayError:!0,mensaje:"La especialidad ingresada ya existe."},Object.keys(b).length)?(u?.setErrors(b),m.validando=!1,b):u?.errors?(m.validando=!1,u?.errors):(u?.setErrors(null),m.validando=!1,null)))}}function V(){return v=>{const m=v,f={};if(""==m?.value||null==m?.value||null==m?.value)f.campoVacio={hayError:!0,mensaje:"Campo requerido."};else{var u=m?.value,p=u.lastIndexOf(".")+1,b=u.substr(p,u.length).toLowerCase();"jpg"!=b&&"jpeg"!=b&&"png"!=b&&(f.archivoInvalido={hayError:!0,mensaje:"Solo se admiten archivos de tipo jpg | jpeg | png."})}return Object.keys(f).length?(m?.setErrors(f),f):(m?.setErrors(null),null)}}function d(){return v=>{const m=v,f=[];return(""==m?.value||null==m?.value||null==m?.value||-1==m?.value)&&(f.campoVacio={hayError:!0,mensaje:"Campo requerido."}),Object.keys(f).length?(m?.setErrors(f),f):(m?.setErrors(null),null)}}function se(v,m,f,u,p=null,b=!1,C=!0){return O=>{const Y=O.get(f),P=O.get(u);if(Y&&Y.value){const j={};let le=null==P?.value||null==P?.value||""==P?.value.trim();if(le?j.campoVacio={hayError:!0,mensaje:null!=p&&null!=p.campoVacio?p.campoVacio:"Campo requerido."}:P?.value.length<v?j.lenMinimo={hayError:!0,mensaje:null!=p&&null!=p.lenMinimo?p.lenMinimo:`Solo se admite un m\xednimo de ${v} caracteres.`}:P?.value.length>m&&(j.lenMaximo={hayError:!0,mensaje:null!=p&&null!=p.lenMaximo?p.lenMaximo:`Solo se admite un m\xe1ximo de ${m} caracteres.`}),b?!le&&!(C?/^[a-zA-Z\s]+$/:/^[a-zA-Z]+$/).test(P?.value)&&(j.textoInvalido={hayError:!0,mensaje:null!=p&&null!=p.textoInvalido?p.textoInvalido:`Solo se admiten letras a-z ${C?"":"(sin espacios)"}.`}):C||!le&&/\s/.test(P?.value)&&(j.textoInvalido={hayError:!0,mensaje:null!=p&&null!=p.textoInvalido?p.textoInvalido:"No se admiten espacios."}),Object.keys(j).length)return P?.setErrors(j),j}return P?.setErrors(null),null}}}}]);