"use strict";(self.webpackChunkTP_CLINICA=self.webpackChunkTP_CLINICA||[]).push([[472],{6472:(N,h,n)=>{n.r(h),n.d(h,{LoginModule:()=>E});var v=n(6895),f=n(6378),p=n(5861),c=n(4006),D=n(5708),C=n(4500),e=n(4650),_=n(7556),L=n(1209),I=n(9724),g=n(6912),O=n(516);let S=(()=>{class t{constructor(r){this.firestoreDB=r,this.nombreColeccion="logs"}cargarItemConIdAsignado(r){return this.firestoreDB.guardarObjetoConIdAsignado(this.nombreColeccion,{...r})}cargarItemSinIdAsignado(r){return this.firestoreDB.guardarObjetoSinIdAsignado(this.nombreColeccion,{...r})}traerItemPorId(r){var o=this;return(0,p.Z)(function*(){return o.firestoreDB.traerObjetoPorId_Promesa(o.nombreColeccion,r)})()}traerItemPorId_Observable(r){return this.firestoreDB.traerObjetoPorId_Observable(this.nombreColeccion,r)}obtenerListaDeItems(){return this.firestoreDB.traerListaDeObjetos(this.nombreColeccion)}obtenerListadoDeItemsObservable(){return this.firestoreDB.traerListaDeObjetosConObservable(this.nombreColeccion)}modificarItem(r){return this.firestoreDB.modificarObjeto(this.nombreColeccion,r)}eliminarItem(r){return this.firestoreDB.eliminarObjeto(this.nombreColeccion,r)}traerListaDeItemsFiltradaConObservable(r,o){return this.firestoreDB.traerListaDeObjetosFiltradaConObservable(this.nombreColeccion,r,g.n.igual,o)}traerListaDeItemsFiltradaCon_DESIGUALDAD_Observable(r,o){return this.firestoreDB.traerListaDeObjetosFiltradaConObservable(this.nombreColeccion,r,g.n.distinto,o)}traerListaDeItemsFiltradoPor_TRES_CamposDe_IGUALDAD(r,o,a,i,l,u){return this.firestoreDB.traerListaDeObjetosCon_TRES_FiltrosDe_IGUALDAD_ConObservable(this.nombreColeccion,r,o,a,i,l,u)}traerListaFiltradaPor_UN_Campo(r,o){return this.firestoreDB.traerListaDeObjetosFiltrada(this.nombreColeccion,r,g.n.igual,o)}traerListaFiltradaPor_UN_Campo_DESIGUALDAD(r,o){return this.firestoreDB.traerListaDeObjetosFiltrada(this.nombreColeccion,r,g.n.distinto,o)}traerListaFiltradaPor_DOS_CamposObservable(r,o,a,i){return this.firestoreDB.traerListaDeObjetosCon_DOS_FiltrosDe_IGUALDAD_ConObservable(this.nombreColeccion,r,o,a,i)}traerListaFiltradaPor_DOS_Campos(r,o,a,i){return this.firestoreDB.traerListaDeObjetosCon_DOS_FiltrosDe_IGUALDAD(this.nombreColeccion,r,o,a,i)}traerListaFiltradaPor_DOS_Campos_IGUALDAD_DESIGUALDAD(r,o,a,i){return this.firestoreDB.traerListaDeObjetosCon_UnFiltro_IGUALDAD_YUNO_DESIGUALDAD(this.nombreColeccion,r,o,a,i)}traerListaFiltradaPor_TRES_Campos(r,o,a,i,l,u){return this.firestoreDB.traerListaDeObjetosCon_TRES_FiltrosDe_IGUALDAD(this.nombreColeccion,r,o,a,i,l,u)}traerListaFiltradaPor_TRES_Campos_I_I_D_Observable(r,o,a,i,l,u){return this.firestoreDB.traerListaDeObjetosCon_TRES_Filtros_I_I_D_ConObservable(this.nombreColeccion,r,o,a,i,l,u)}traerListaFiltradaPor_DOS_Campos_D_I_Observable(r,o,a,i){return this.firestoreDB.traerListaDeObjetosCon_DOS_FiltrosDe_D_I_ConObservable(this.nombreColeccion,r,o,a,i)}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(O.C))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=n(4465),F=n(605);function j(t,s){if(1&t&&(e.TgZ(0,"small",19),e._uU(1),e.qZA()),2&t){const r=s.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.correo?null:o.correo.getError(r).mensaje," ")}}function U(t,s){if(1&t&&(e.ynx(0),e.YNc(1,j,2,1,"small",18),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.correo?null:r.correo.errors))}}function y(t,s){if(1&t&&(e.TgZ(0,"small",19),e._uU(1),e.qZA()),2&t){const r=s.$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.clave?null:o.clave.getError(r).mensaje," ")}}function T(t,s){if(1&t&&(e.ynx(0),e.YNc(1,y,2,1,"small",18),e.BQk()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.obtenerErrores(null==r.clave?null:r.clave.errors))}}function P(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"button",20),e.NdJ("click",function(){const i=e.CHM(r).$implicit,l=e.oxw();return e.KtG(l.cargarUsuarioDefault(i))}),e._UZ(2,"img",21),e.qZA()()}if(2&t){const r=s.$implicit;e.xp6(2),e.MGl("src","",r.imagen," ",e.LSH)}}function x(t,s){if(1&t&&e._UZ(0,"app-loader",22),2&t){const r=e.oxw();e.Q6J("title",r.loaderTexto)}}const Z=[{path:"",component:(()=>{class t{constructor(r,o,a,i,l,u){this.router=r,this.authService=o,this.usuarioService=a,this.swalService=i,this.logService=l,this.toastService=u,this.cargando=!1,this.loaderTexto="Iniciando Sesi\xf3n",this.listaUsuarios=[{correo:"takak82746@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u1.jpg"},{correo:"jiyivo3885@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u2.jpg"},{correo:"kecon57023@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/u3.jpg"},{correo:"yosadoj637@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/m1.jpg"},{correo:"fowibis816@aaorsi.com",clave:"111111",imagen:"../assets/fotosPerfil/m2.jpg"},{correo:"ritakoh205@akoption.com",clave:"111111",imagen:"../assets/fotosPerfil/a1.png"}]}ngOnInit(){this.form=new c.cw({correo:new c.NI("",{validators:[(0,D.qc)()]}),clave:new c.NI("",{validators:[(0,D.$k)(6,100,null,!1)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){this.cargando=!0;let r=!1,o=!1;for(const i in this.form.controls)if(this.form.controls.hasOwnProperty(i)){const l=this.form.controls[i];l.errors&&(r=!0),(null==l.value||""==l.value)&&(o=!0)}let a="";r&&(a+="Hay campos con errores, por favor corr\xedjalos para iniciar sesi\xf3n. </br>"),(r||o)&&(this.toastService.error(a,"Aviso."),this.cargando=!1),!r&&!o&&this.loguearUsuario()}obtenerErrores(r){return Object.keys(r)}loguearUsuario(){var r=this;let o="";this.authService.logIn(this.correo?.value,this.clave?.value).then(function(){var a=(0,p.Z)(function*(i){let l=i.user?.uid;i.user?.emailVerified?null!=l?yield r.usuarioService.traerUsuarioPorId(l).then(b=>{if(null!=b){let m=b;if(m.habilitado==C.j.habilitado){let d={};d.usuario=m,d.dia=new Date,d.diaInt=d.dia.getTime(),r.logService.cargarItemSinIdAsignado(d).finally(()=>{r.toastService.exito(`Bienvenido/a ${m.nombre}, ${m.apellido} !`,"Login exitoso!"),r.usuarioService.cargarUsuarioActual(m),setTimeout(()=>{r.router.navigate(["home"]),r.cargando=!1},1e3)})}else r.authService.logOut(),r.swalService.error("Su cuenta no esta habilitada para iniciar sesi\xf3n."),r.cargando=!1}else o="Ha ocurrido un error al intentar cargar los datos del usuario."}).catch(b=>{}):o="Ha ocurrido un error al intentar cargar los datos del usuario.":(r.authService.logOut(),r.usuarioService.limpiarUsuarioActual(),r.swalService.error("\xa1Debe verificar su correo electr\xf3nico! Por favor, revise su bandeja de entrada (incluyendo la carpeta de Spam) y haga clic en el enlace de verificaci\xf3n para completar el proceso."),r.cargando=!1),""!=o&&(r.toastService.error(o),r.cargando=!1)});return function(i){return a.apply(this,arguments)}}()).catch(a=>{switch(a.code){case"auth/invalid-email":o="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":o="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":o="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":o="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":o="Usuario no encontrado.";break;default:o="Ha ocurrido un error y no se pudo cargar el usuario."}""!=o&&(this.toastService.error(o,"Aviso."),this.cargando=!1)})}limpiarFormulario(){this.form.reset();for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}cargarUsuarioDefault(r){this.correo?.setValue(r.correo),this.clave?.setValue(r.clave)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f.F0),e.Y36(_.e),e.Y36(L.i),e.Y36(I.J),e.Y36(S),e.Y36(A.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:31,vars:5,consts:[[1,"container","entrada"],[1,"row","w-100","d-flex","justify-content-center","ml-0",2,"align-self","center"],[1,"col","col-12","justify-content-center","col-lg-6"],[1,"card","p-4","mt-4","centrar","sombra-luminosa"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","routerLink","",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],["type","submit",1,"btn","btn-primary","fs-4","fw-bold","p-2","m-2"],[1,"mt-3"],["routerLink","../registro",1,""],[1,"d-flex",2,"flex-wrap","wrap"],[4,"ngFor","ngForOf"],[3,"title",4,"ngIf"],["class","d-block error",4,"ngFor","ngForOf"],[1,"d-block","error"],["type","button",1,"btn","botones",3,"click"],["width","50px",1,"img-foto",3,"src"],[3,"title"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return o.iniciarSesion()}),e.TgZ(5,"fieldset")(6,"legend"),e._uU(7,"Complete sus datos para ingresar"),e.qZA(),e.TgZ(8,"div")(9,"label",5),e._uU(10,"Ingrese su correo electr\xf3nico"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,U,2,1,"ng-container",7),e.qZA(),e.TgZ(13,"div")(14,"label",8),e._uU(15,"Ingrese una contrase\xf1a"),e.qZA(),e._UZ(16,"input",9),e.YNc(17,T,2,1,"ng-container",7),e.qZA(),e.TgZ(18,"div")(19,"div",10)(20,"button",11),e._uU(21," Volver a bienvenido "),e.qZA(),e.TgZ(22,"button",12),e._uU(23," Ingresar "),e.qZA()(),e.TgZ(24,"label",13),e._uU(25,"\xbfNo posee una cuenta? Registrese "),e.TgZ(26,"a",14),e._uU(27,"AQUI"),e.qZA()()()(),e.TgZ(28,"div",15),e.YNc(29,P,3,1,"div",16),e.qZA()()()()()(),e.YNc(30,x,1,1,"app-loader",17)),2&r&&(e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(8),e.Q6J("ngIf",null==o.correo?null:o.correo.errors),e.xp6(5),e.Q6J("ngIf",null==o.clave?null:o.clave.errors),e.xp6(12),e.Q6J("ngForOf",o.listaUsuarios),e.xp6(1),e.Q6J("ngIf",o.cargando))},dependencies:[v.sg,v.O5,f.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,F.R],styles:[".error[_ngcontent-%COMP%]{color:red}.botones[_ngcontent-%COMP%]{background:rgb(76,204,62);border-radius:50%;border:none}.img-foto[_ngcontent-%COMP%]{border-radius:50%;height:65px;width:65px}.entrada[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate-in-2-ccw .5s cubic-bezier(.25,.46,.45,.94) both}@keyframes _ngcontent-%COMP%_rotate-in-2-ccw{0%{transform:rotate(45deg);opacity:0}to{transform:rotate(0);opacity:1}}"]}),t})()}];let B=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild(Z),f.Bz]}),t})();var w=n(4466);let E=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.ez,B,c.u5,c.UX,w.m]}),t})()}}]);